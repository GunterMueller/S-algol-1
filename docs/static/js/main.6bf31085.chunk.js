(this.webpackJsonpcompiler=this.webpackJsonpcompiler||[]).push([[0],{1:function(e,t,n){"use strict";n.d(t,"db",(function(){return l})),n.d(t,"qb",(function(){return f})),n.d(t,"rb",(function(){return x})),n.d(t,"q",(function(){return b})),n.d(t,"r",(function(){return k})),n.d(t,"s",(function(){return y})),n.d(t,"t",(function(){return v})),n.d(t,"M",(function(){return _})),n.d(t,"ab",(function(){return D})),n.d(t,"bb",(function(){return F})),n.d(t,"cb",(function(){return P})),n.d(t,"kb",(function(){return A})),n.d(t,"lb",(function(){return W})),n.d(t,"mb",(function(){return B})),n.d(t,"d",(function(){return z})),n.d(t,"e",(function(){return J})),n.d(t,"f",(function(){return H})),n.d(t,"g",(function(){return X})),n.d(t,"h",(function(){return Q})),n.d(t,"i",(function(){return Z})),n.d(t,"j",(function(){return $})),n.d(t,"k",(function(){return ee})),n.d(t,"l",(function(){return te})),n.d(t,"K",(function(){return ae})),n.d(t,"L",(function(){return oe})),n.d(t,"Zb",(function(){return le})),n.d(t,"ac",(function(){return he})),n.d(t,"bc",(function(){return de})),n.d(t,"cc",(function(){return pe})),n.d(t,"dc",(function(){return fe})),n.d(t,"w",(function(){return Pe})),n.d(t,"x",(function(){return Ue})),n.d(t,"y",(function(){return Ne})),n.d(t,"G",(function(){return Ye})),n.d(t,"H",(function(){return ze})),n.d(t,"z",(function(){return Je})),n.d(t,"A",(function(){return He})),n.d(t,"B",(function(){return Xe})),n.d(t,"C",(function(){return Qe})),n.d(t,"D",(function(){return Ze})),n.d(t,"E",(function(){return $e})),n.d(t,"F",(function(){return et})),n.d(t,"Tb",(function(){return tt})),n.d(t,"Ub",(function(){return nt})),n.d(t,"Vb",(function(){return it})),n.d(t,"Wb",(function(){return rt})),n.d(t,"Xb",(function(){return at})),n.d(t,"Yb",(function(){return ot})),n.d(t,"eb",(function(){return xt})),n.d(t,"fb",(function(){return bt})),n.d(t,"gb",(function(){return kt})),n.d(t,"hb",(function(){return yt})),n.d(t,"ib",(function(){return vt})),n.d(t,"jb",(function(){return wt})),n.d(t,"N",(function(){return _t})),n.d(t,"O",(function(){return gt})),n.d(t,"P",(function(){return mt})),n.d(t,"Q",(function(){return Ot})),n.d(t,"R",(function(){return Et})),n.d(t,"S",(function(){return jt})),n.d(t,"c",(function(){return Ct})),n.d(t,"a",(function(){return Ft})),n.d(t,"b",(function(){return Pt})),n.d(t,"T",(function(){return Ut})),n.d(t,"U",(function(){return It})),n.d(t,"V",(function(){return Rt})),n.d(t,"W",(function(){return qt})),n.d(t,"X",(function(){return At})),n.d(t,"Y",(function(){return Wt})),n.d(t,"Z",(function(){return Bt})),n.d(t,"nb",(function(){return Nt})),n.d(t,"ob",(function(){return Kt})),n.d(t,"pb",(function(){return Gt})),n.d(t,"u",(function(){return Vt})),n.d(t,"v",(function(){return Yt})),n.d(t,"m",(function(){return zt})),n.d(t,"n",(function(){return Jt})),n.d(t,"o",(function(){return Ht})),n.d(t,"p",(function(){return Xt})),n.d(t,"Rb",(function(){return Qt})),n.d(t,"Sb",(function(){return Zt})),n.d(t,"I",(function(){return $t})),n.d(t,"J",(function(){return en})),n.d(t,"Db",(function(){return nn})),n.d(t,"Eb",(function(){return rn})),n.d(t,"Jb",(function(){return an})),n.d(t,"Kb",(function(){return on})),n.d(t,"Lb",(function(){return sn})),n.d(t,"Mb",(function(){return cn})),n.d(t,"Nb",(function(){return un})),n.d(t,"Ob",(function(){return ln})),n.d(t,"Pb",(function(){return hn})),n.d(t,"Qb",(function(){return dn})),n.d(t,"Fb",(function(){return pn})),n.d(t,"Gb",(function(){return fn})),n.d(t,"Hb",(function(){return xn})),n.d(t,"Ib",(function(){return bn})),n.d(t,"sb",(function(){return kn})),n.d(t,"tb",(function(){return yn})),n.d(t,"vb",(function(){return vn})),n.d(t,"wb",(function(){return wn})),n.d(t,"xb",(function(){return _n})),n.d(t,"yb",(function(){return gn})),n.d(t,"zb",(function(){return mn})),n.d(t,"Ab",(function(){return On})),n.d(t,"Bb",(function(){return En})),n.d(t,"Cb",(function(){return jn})),n.d(t,"ub",(function(){return Tn}));var i=n(6),r=n(2),a=n(0),o=function e(t){Object(a.a)(this,e),this.val=t},s=function e(t){Object(a.a)(this,e),this.val=t},c=function e(t){Object(a.a)(this,e),this.val=t},u=function e(t){Object(a.a)(this,e),this.val=t},l=function(){function e(t){var n=this;Object(a.a)(this,e),this.programRaw=t,this.typeR=/^[*c]*(?:int|real|bool|string|pixel|pic|pntr|file|#pixel|#cpixel)/,this.numberR=/^\d+(?:\.\d*)?(?:e\d+)?/,this.idR=/^\w+(?:[.\w]*\w)?/,this.stringR=/^"((?:'"|''|.)*?)"/,this.wsR=/^\s+/,this.semicolonR=/^\s*[\n;]\s*/,this.symbolsR=/^[^\s\w]+/,this.commentR=/![^"]*/,this.cursor=0,this.program=void 0,this.terminals=[";","let","=",":=","structure","(",")",";","procedure",";","(",")",";","(",")","->",",","structure","(",")",",","forward",",","if","repeat","while","while","do","for","=","to","do","case","of","default",":","abort","do","by",":=","do","then","else",";",":","write","output",",","out.byte",",",",","out.16",",",",","out.32",",",",",":","onto","ror","rand","xor","copy","nand","nor","not","xnor",",","or","and","~","(",")","|",",","(",")","begin","end","{","}","vector","of","@","of","[","]",",",",","::","image","by","of","limit","to","by","at",",","shift","by",",","scale","by",",","rotate","by","colour","in","text","from",",","to",",","[",",","]","nil","nullfile","true","false","on","off","&","+","-","++","div","rem","*","/","^","&","=","~=","<=","<",">=",">","is","isnt","upb","lwb","eof","read.a.line","read","readi","readr","readb","peek","reads","read.name","read.byte","read.16","read.32","r.w","i.w","s.w","s.o","s.i","maxint","maxreal","epsilon","pi","cursor","screen"],this.lookaheads={Program:[].concat(h.lookaheads()),Sequence:[].concat(d.lookaheads()),SequenceFollow:[].concat(p.lookaheads()),SequenceEl:[].concat(f.lookaheads(),x.lookaheads()),Declaration:[].concat(b.lookaheads(),k.lookaheads(),y.lookaheads(),v.lookaheads()),LetDecl:[].concat(w.lookaheads()),InitOp:[].concat(_.lookaheads(),g.lookaheads()),StructureDecl:[].concat(m.lookaheads()),StructureDeclFields:[].concat(O.lookaheads()),FieldList:[].concat(E.lookaheads()),FieldListFollow:[].concat(j.lookaheads()),FieldListEl:[].concat(T.lookaheads()),ProcDecl:[].concat(C.lookaheads()),ProcDeclType:[].concat(M.lookaheads()),ParameterList:[].concat(L.lookaheads()),ParameterListFollow:[].concat(S.lookaheads()),Parameter:[].concat(D.lookaheads(),F.lookaheads(),P.lookaheads()),ProcType:[].concat(U.lookaheads()),ReturnTypex:[].concat(I.lookaheads()),PtypeList:[].concat(R.lookaheads()),PtypeListFollow:[].concat(q.lookaheads()),PtypeListEl:[].concat(A.lookaheads(),W.lookaheads(),B.lookaheads()),SDecl:[].concat(N.lookaheads()),SDeclFollow:[].concat(K.lookaheads()),Forward:[].concat(G.lookaheads()),IdentifierList:[].concat(V.lookaheads()),IdentifierListFollow:[].concat(Y.lookaheads()),Clause:[].concat(z.lookaheads(),J.lookaheads(),H.lookaheads(),X.lookaheads(),Q.lookaheads(),Z.lookaheads(),$.lookaheads(),ee.lookaheads(),te.lookaheads()),ClauseDo:[].concat(ne.lookaheads()),ClauseBy:[].concat(ie.lookaheads()),ClauseExprFollow:[].concat(re.lookaheads()),IfClauseThen:[].concat(ae.lookaheads(),oe.lookaheads()),CaseList:[].concat(se.lookaheads()),CaseListFollow:[].concat(ce.lookaheads()),CaseListEl:[].concat(ue.lookaheads()),WriteClause:[].concat(le.lookaheads(),he.lookaheads(),de.lookaheads(),pe.lookaheads(),fe.lookaheads()),WriteList:[].concat(xe.lookaheads()),WriteListFollow:[].concat(be.lookaheads()),WriteListEl:[].concat(ke.lookaheads()),WriteListElFollow:[].concat(ye.lookaheads()),Raster:[].concat(ve.lookaheads()),RasterOp:[].concat(we.lookaheads(),_e.lookaheads(),ge.lookaheads(),me.lookaheads(),Oe.lookaheads(),Ee.lookaheads(),je.lookaheads(),Te.lookaheads()),ClauseList:[].concat(Ce.lookaheads()),ClauseListFollow:[].concat(Me.lookaheads()),Expression:[].concat(Le.lookaheads()),ExpressionFollow:[].concat(Se.lookaheads()),Exp1:[].concat(De.lookaheads()),Exp1Follow:[].concat(Fe.lookaheads()),Exp2:[].concat(Pe.lookaheads(),Ue.lookaheads()),Exp2Tilde:[].concat(Ie.lookaheads()),Exp2Op:[].concat(Re.lookaheads()),Exp3:[].concat(qe.lookaheads()),Exp3Op:[].concat(Ae.lookaheads()),Exp4:[].concat(We.lookaheads()),Exp4Op:[].concat(Be.lookaheads()),Exp5:[].concat(Ne.lookaheads(),Ke.lookaheads()),Exp5Follow:[].concat(Ge.lookaheads()),ExpressionArg:[].concat(Ve.lookaheads()),ExpressionArgFollow:[].concat(Ye.lookaheads(),ze.lookaheads()),Exp6:[].concat(Je.lookaheads(),He.lookaheads(),Xe.lookaheads(),Qe.lookaheads(),Ze.lookaheads(),$e.lookaheads(),et.lookaheads()),ValueConstructor:[].concat(tt.lookaheads(),nt.lookaheads(),it.lookaheads(),rt.lookaheads()),VectorConstr:[].concat(at.lookaheads(),ot.lookaheads()),VectorConstrFollow:[].concat(st.lookaheads()),Range:[].concat(ct.lookaheads()),RangeFollow:[].concat(ut.lookaheads()),RangeEl:[].concat(lt.lookaheads()),ImageConstr:[].concat(ht.lookaheads()),SubimageConstr:[].concat(dt.lookaheads()),SubimageConstrMid:[].concat(pt.lookaheads()),SubimageConstrEnd:[].concat(ft.lookaheads()),PictureConstr:[].concat(xt.lookaheads(),bt.lookaheads(),kt.lookaheads(),yt.lookaheads(),vt.lookaheads(),wt.lookaheads()),Literal:[].concat(_t.lookaheads(),gt.lookaheads(),mt.lookaheads(),Ot.lookaheads(),Et.lookaheads(),jt.lookaheads()),IntegerLiteral:[].concat(Tt.lookaheads()),BooleanLiteral:[].concat(Ct.lookaheads(),Mt.lookaheads()),PixelLiteral:[].concat(Lt.lookaheads(),St.lookaheads()),PixelLiteralFollow:[].concat(Dt.lookaheads()),AddOp:[].concat(Ft.lookaheads(),Pt.lookaheads()),MultOp:[].concat(Ut.lookaheads(),It.lookaheads(),Rt.lookaheads(),qt.lookaheads(),At.lookaheads(),Wt.lookaheads(),Bt.lookaheads()),RelOp:[].concat(Nt.lookaheads(),Kt.lookaheads(),Gt.lookaheads()),EqOp:[].concat(Vt.lookaheads(),Yt.lookaheads()),ComparOp:[].concat(zt.lookaheads(),Jt.lookaheads(),Ht.lookaheads(),Xt.lookaheads()),TypeOp:[].concat(Qt.lookaheads(),Zt.lookaheads()),Identifier:[].concat($t.lookaheads(),en.lookaheads()),StandardExp:[].concat(tn.lookaheads()),StandardName:[].concat(nn.lookaheads(),rn.lookaheads(),an.lookaheads(),on.lookaheads(),sn.lookaheads(),cn.lookaheads(),un.lookaheads(),ln.lookaheads(),hn.lookaheads(),dn.lookaheads(),pn.lookaheads(),fn.lookaheads(),xn.lookaheads(),bn.lookaheads()),StandardId:[].concat(kn.lookaheads(),yn.lookaheads(),vn.lookaheads(),wn.lookaheads(),_n.lookaheads(),gn.lookaheads(),mn.lookaheads(),On.lookaheads(),En.lookaheads(),jn.lookaheads(),Tn.lookaheads())},this.program=t.split("\n").map((function(e){var t=e.match(n.commentR);return t?e.replace(n.commentR," ".repeat(t[0].length)):e})).join("\n")}return Object(r.a)(e,[{key:"parse",value:function(){try{return this.createProgram()}catch(e){throw e.pos=this.cursor,e}}},{key:"next",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.cursor,t=this.program.slice(e).match(this.wsR);return t?this.program.slice(e+t[0].length):this.program.slice(e)}},{key:"skipWS",value:function(){var e=this.program.slice(this.cursor).match(this.wsR);e&&(this.cursor+=e[0].length)}},{key:"isWord",value:function(e){return null!==e.match(this.idR)}},{key:"expect",value:function(e){if(";"===e){var t=this.program.slice(this.cursor).match(this.semicolonR);if(!t)throw new Error("Expected semicolon");this.cursor+=t[0].length}else{if("__TYPE"===e)throw new Error("Called type match - should not be called in expect");if("__NUMBER"===e)throw new Error("Called number match - should not be called in expect");if("__ID"===e)throw new Error("Called ID match - should not be called in expect");if("__STRING"===e)throw new Error("Called string match - should not be called in expect");if(this.skipWS(),this.isWord(e)){var n=this.next().match(this.idR);if(!n||n[0]!==e)throw new Error("Expected "+e);this.cursor+=e.length}else{if(!this.next().startsWith(e))throw new Error("Expected "+e);this.cursor+=e.length}}}},{key:"nextMatches",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.cursor,a=Object(i.a)(e);try{for(a.s();!(n=a.n()).done;){var o=n.value;if(";"===o){var s=this.program.slice(r).match(this.semicolonR);if(!s)continue;return!t||this.nextMatches(t,[],r+s[0].length)}if("__TYPE"===o){if(this.next(r).match(this.typeR))return!0}else if("__NUMBER"===o){if(this.next(r).match(this.numberR))return!0}else if("__ID"===o){var c=this.next(r).match(this.idR),u=this.next(r).match(this.typeR);if(c&&(!u||c[0]!==u[0])&&!this.terminals.includes(c[0]))return!0}else if("__STRING"===o){if(this.next(r).match(this.stringR))return!0}else if(this.isWord(o)){var l=this.next(r).match(this.idR);if(l&&l[0]===o)return!0}else{var h=this.next(r).match(this.symbolsR);if(h&&this.next(r).startsWith(o))return!0}}}catch(d){a.e(d)}finally{a.f()}return!1}},{key:"createType_",value:function(){this.skipWS();var e=this.next().match(this.typeR);return this.cursor+=e[0].length,new o(e[0])}},{key:"createString_",value:function(){this.skipWS();var e=this.next().match(this.stringR);return this.cursor+=e[0].length,new s(e[1])}},{key:"createId_",value:function(){this.skipWS();var e=this.next().match(this.idR);return this.cursor+=e[0].length,new c(e[0])}},{key:"createNumber_",value:function(){this.skipWS();var e=this.next().match(this.numberR);return this.cursor+=e[0].length,new u(Number.parseFloat(e[0]))}},{key:"createProgram",value:function(){var e=this.cursor;if(this.nextMatches(h.lookaheads())){var t=this.createSequence();return new h(e,t)}throw new Error("Unexpected input")}},{key:"createSequence",value:function(){var e=this.cursor;if(this.nextMatches(d.lookaheads())){for(var t=this.createSequenceEl(),n=[];this.nextMatches(this.lookaheads.SequenceFollow,this.lookaheads.SequenceEl);)n.push(this.createSequenceFollow());return new d(e,t,n)}throw new Error("Unexpected input")}},{key:"createSequenceFollow",value:function(){var e=this.cursor;if(this.nextMatches(p.lookaheads())){this.expect(";");var t=this.createSequenceEl();return new p(e,t)}throw new Error("Unexpected input")}},{key:"createSequenceEl",value:function(){var e=this.cursor;if(this.nextMatches(f.lookaheads())){var t=this.createDeclaration();return new f(e,t)}if(this.nextMatches(x.lookaheads())){var n=this.createClause();return new x(e,n)}throw new Error("Unexpected input")}},{key:"createDeclaration",value:function(){var e=this.cursor;if(this.nextMatches(b.lookaheads())){var t=this.createLetDecl();return new b(e,t)}if(this.nextMatches(k.lookaheads())){var n=this.createStructureDecl();return new k(e,n)}if(this.nextMatches(y.lookaheads())){var i=this.createProcDecl();return new y(e,i)}if(this.nextMatches(v.lookaheads())){var r=this.createForward();return new v(e,r)}throw new Error("Unexpected input")}},{key:"createLetDecl",value:function(){var e=this.cursor;if(this.nextMatches(w.lookaheads())){this.expect("let");var t=this.createIdentifier(),n=this.createInitOp(),i=this.createClause();return new w(e,t,n,i)}throw new Error("Unexpected input")}},{key:"createInitOp",value:function(){var e=this.cursor;if(this.nextMatches(_.lookaheads()))return this.expect("="),new _(e);if(this.nextMatches(g.lookaheads()))return this.expect(":="),new g(e);throw new Error("Unexpected input")}},{key:"createStructureDecl",value:function(){var e=this.cursor;if(this.nextMatches(m.lookaheads())){this.expect("structure");var t=this.createIdentifier(),n=void 0;return this.nextMatches(this.lookaheads.StructureDeclFields)&&(n=this.createStructureDeclFields()),new m(e,t,n)}throw new Error("Unexpected input")}},{key:"createStructureDeclFields",value:function(){var e=this.cursor;if(this.nextMatches(O.lookaheads())){this.expect("(");var t=void 0;return this.nextMatches(this.lookaheads.FieldList)&&(t=this.createFieldList()),this.expect(")"),new O(e,t)}throw new Error("Unexpected input")}},{key:"createFieldList",value:function(){var e=this.cursor;if(this.nextMatches(E.lookaheads())){for(var t=this.createFieldListEl(),n=[];this.nextMatches(this.lookaheads.FieldListFollow,this.lookaheads.FieldListEl);)n.push(this.createFieldListFollow());return new E(e,t,n)}throw new Error("Unexpected input")}},{key:"createFieldListFollow",value:function(){var e=this.cursor;if(this.nextMatches(j.lookaheads())){this.expect(";");var t=this.createFieldListEl();return new j(e,t)}throw new Error("Unexpected input")}},{key:"createFieldListEl",value:function(){var e=this.cursor;if(this.nextMatches(T.lookaheads())){var t=this.createType_(),n=this.createIdentifierList();return new T(e,t,n)}throw new Error("Unexpected input")}},{key:"createProcDecl",value:function(){var e=this.cursor;if(this.nextMatches(C.lookaheads())){this.expect("procedure");var t=this.createIdentifier(),n=void 0;this.nextMatches(this.lookaheads.ProcDeclType)&&(n=this.createProcDeclType()),this.expect(";");var i=this.createClause();return new C(e,t,n,i)}throw new Error("Unexpected input")}},{key:"createProcDeclType",value:function(){var e=this.cursor;if(this.nextMatches(M.lookaheads())){this.expect("(");var t=void 0;this.nextMatches(this.lookaheads.ParameterList)&&(t=this.createParameterList());var n=void 0;return this.nextMatches(this.lookaheads.ReturnTypex)&&(n=this.createReturnTypex()),this.expect(")"),new M(e,t,n)}throw new Error("Unexpected input")}},{key:"createParameterList",value:function(){var e=this.cursor;if(this.nextMatches(L.lookaheads())){for(var t=this.createParameter(),n=[];this.nextMatches(this.lookaheads.ParameterListFollow,this.lookaheads.Parameter);)n.push(this.createParameterListFollow());return new L(e,t,n)}throw new Error("Unexpected input")}},{key:"createParameterListFollow",value:function(){var e=this.cursor;if(this.nextMatches(S.lookaheads())){this.expect(";");var t=this.createParameter();return new S(e,t)}throw new Error("Unexpected input")}},{key:"createParameter",value:function(){var e=this.cursor;if(this.nextMatches(D.lookaheads())){var t=this.createType_(),n=this.createIdentifierList();return new D(e,t,n)}if(this.nextMatches(F.lookaheads())){var i=this.createStructureDecl();return new F(e,i)}if(this.nextMatches(P.lookaheads())){var r=this.createProcType(),a=this.createIdentifierList();return new P(e,r,a)}throw new Error("Unexpected input")}},{key:"createProcType",value:function(){var e=this.cursor;if(this.nextMatches(U.lookaheads())){this.expect("(");var t=void 0;this.nextMatches(this.lookaheads.PtypeList)&&(t=this.createPtypeList());var n=void 0;return this.nextMatches(this.lookaheads.ReturnTypex)&&(n=this.createReturnTypex()),this.expect(")"),new U(e,t,n)}throw new Error("Unexpected input")}},{key:"createReturnTypex",value:function(){var e=this.cursor;if(this.nextMatches(I.lookaheads())){this.expect("->");var t=this.createType_();return new I(e,t)}throw new Error("Unexpected input")}},{key:"createPtypeList",value:function(){var e=this.cursor;if(this.nextMatches(R.lookaheads())){for(var t=this.createPtypeListEl(),n=[];this.nextMatches(this.lookaheads.PtypeListFollow);)n.push(this.createPtypeListFollow());return new R(e,t,n)}throw new Error("Unexpected input")}},{key:"createPtypeListFollow",value:function(){var e=this.cursor;if(this.nextMatches(q.lookaheads())){this.expect(",");var t=this.createPtypeListEl();return new q(e,t)}throw new Error("Unexpected input")}},{key:"createPtypeListEl",value:function(){var e=this.cursor;if(this.nextMatches(A.lookaheads())){var t=this.createType_();return new A(e,t)}if(this.nextMatches(W.lookaheads())){var n=this.createProcType();return new W(e,n)}if(this.nextMatches(B.lookaheads())){var i=this.createSDecl();return new B(e,i)}throw new Error("Unexpected input")}},{key:"createSDecl",value:function(){var e=this.cursor;if(this.nextMatches(N.lookaheads())){this.expect("structure"),this.expect("(");for(var t=this.createType_(),n=[];this.nextMatches(this.lookaheads.SDeclFollow);)n.push(this.createSDeclFollow());return this.expect(")"),new N(e,t,n)}throw new Error("Unexpected input")}},{key:"createSDeclFollow",value:function(){var e=this.cursor;if(this.nextMatches(K.lookaheads())){this.expect(",");var t=this.createType_();return new K(e,t)}throw new Error("Unexpected input")}},{key:"createForward",value:function(){var e=this.cursor;if(this.nextMatches(G.lookaheads())){this.expect("forward");var t=this.createIdentifier(),n=void 0;return this.nextMatches(this.lookaheads.ProcType)&&(n=this.createProcType()),new G(e,t,n)}throw new Error("Unexpected input")}},{key:"createIdentifierList",value:function(){var e=this.cursor;if(this.nextMatches(V.lookaheads())){for(var t=this.createIdentifier(),n=[];this.nextMatches(this.lookaheads.IdentifierListFollow);)n.push(this.createIdentifierListFollow());return new V(e,t,n)}throw new Error("Unexpected input")}},{key:"createIdentifierListFollow",value:function(){var e=this.cursor;if(this.nextMatches(Y.lookaheads())){this.expect(",");var t=this.createIdentifier();return new Y(e,t)}throw new Error("Unexpected input")}},{key:"createClause",value:function(){var e=this.cursor;if(this.nextMatches(z.lookaheads())){this.expect("if");var t=this.createClause(),n=this.createIfClauseThen();return new z(e,t,n)}if(this.nextMatches(J.lookaheads())){this.expect("repeat");var i=this.createClause();this.expect("while");var r=this.createClause(),a=void 0;return this.nextMatches(this.lookaheads.ClauseDo)&&(a=this.createClauseDo()),new J(e,i,r,a)}if(this.nextMatches(H.lookaheads())){this.expect("while");var o=this.createClause();this.expect("do");var s=this.createClause();return new H(e,o,s)}if(this.nextMatches(X.lookaheads())){this.expect("for");var c=this.createIdentifier();this.expect("=");var u=this.createClause();this.expect("to");var l=this.createClause(),h=void 0;this.nextMatches(this.lookaheads.ClauseBy)&&(h=this.createClauseBy()),this.expect("do");var d=this.createClause();return new X(e,c,u,l,h,d)}if(this.nextMatches(Q.lookaheads())){this.expect("case");var p=this.createClause();this.expect("of");var f=this.createCaseList();this.expect("default"),this.expect(":");var x=this.createClause();return new Q(e,p,f,x)}if(this.nextMatches(Z.lookaheads()))return this.expect("abort"),new Z(e);if(this.nextMatches($.lookaheads())){var b=this.createWriteClause();return new $(e,b)}if(this.nextMatches(ee.lookaheads())){var k=this.createRaster();return new ee(e,k)}if(this.nextMatches(te.lookaheads())){var y=this.createExpression(),v=void 0;return this.nextMatches(this.lookaheads.ClauseExprFollow)&&(v=this.createClauseExprFollow()),new te(e,y,v)}throw new Error("Unexpected input")}},{key:"createClauseDo",value:function(){var e=this.cursor;if(this.nextMatches(ne.lookaheads())){this.expect("do");var t=this.createClause();return new ne(e,t)}throw new Error("Unexpected input")}},{key:"createClauseBy",value:function(){var e=this.cursor;if(this.nextMatches(ie.lookaheads())){this.expect("by");var t=this.createClause();return new ie(e,t)}throw new Error("Unexpected input")}},{key:"createClauseExprFollow",value:function(){var e=this.cursor;if(this.nextMatches(re.lookaheads())){this.expect(":=");var t=this.createClause();return new re(e,t)}throw new Error("Unexpected input")}},{key:"createIfClauseThen",value:function(){var e=this.cursor;if(this.nextMatches(ae.lookaheads())){this.expect("do");var t=this.createClause();return new ae(e,t)}if(this.nextMatches(oe.lookaheads())){this.expect("then");var n=this.createClause();this.expect("else");var i=this.createClause();return new oe(e,n,i)}throw new Error("Unexpected input")}},{key:"createCaseList",value:function(){var e=this.cursor;if(this.nextMatches(se.lookaheads())){for(var t=this.createCaseListEl(),n=[];this.nextMatches(this.lookaheads.CaseListFollow,this.lookaheads.CaseListEl);)n.push(this.createCaseListFollow());return new se(e,t,n)}throw new Error("Unexpected input")}},{key:"createCaseListFollow",value:function(){var e=this.cursor;if(this.nextMatches(ce.lookaheads())){this.expect(";");var t=this.createCaseListEl();return new ce(e,t)}throw new Error("Unexpected input")}},{key:"createCaseListEl",value:function(){var e=this.cursor;if(this.nextMatches(ue.lookaheads())){var t=this.createClauseList();this.expect(":");var n=this.createClause();return new ue(e,t,n)}throw new Error("Unexpected input")}},{key:"createWriteClause",value:function(){var e=this.cursor;if(this.nextMatches(le.lookaheads())){this.expect("write");var t=this.createWriteList();return new le(e,t)}if(this.nextMatches(he.lookaheads())){this.expect("output");var n=this.createClause();this.expect(",");var i=this.createWriteList();return new he(e,n,i)}if(this.nextMatches(de.lookaheads())){this.expect("out.byte");var r=this.createClause();this.expect(",");var a=this.createClause();this.expect(",");var o=this.createClause();return new de(e,r,a,o)}if(this.nextMatches(pe.lookaheads())){this.expect("out.16");var s=this.createClause();this.expect(",");var c=this.createClause();this.expect(",");var u=this.createClause();return new pe(e,s,c,u)}if(this.nextMatches(fe.lookaheads())){this.expect("out.32");var l=this.createClause();this.expect(",");var h=this.createClause();return new fe(e,l,h)}throw new Error("Unexpected input")}},{key:"createWriteList",value:function(){var e=this.cursor;if(this.nextMatches(xe.lookaheads())){for(var t=this.createWriteListEl(),n=[];this.nextMatches(this.lookaheads.WriteListFollow);)n.push(this.createWriteListFollow());return new xe(e,t,n)}throw new Error("Unexpected input")}},{key:"createWriteListFollow",value:function(){var e=this.cursor;if(this.nextMatches(be.lookaheads())){this.expect(",");var t=this.createWriteListEl();return new be(e,t)}throw new Error("Unexpected input")}},{key:"createWriteListEl",value:function(){var e=this.cursor;if(this.nextMatches(ke.lookaheads())){var t=this.createClause(),n=void 0;return this.nextMatches(this.lookaheads.WriteListElFollow)&&(n=this.createWriteListElFollow()),new ke(e,t,n)}throw new Error("Unexpected input")}},{key:"createWriteListElFollow",value:function(){var e=this.cursor;if(this.nextMatches(ye.lookaheads())){this.expect(":");var t=this.createClause();return new ye(e,t)}throw new Error("Unexpected input")}},{key:"createRaster",value:function(){var e=this.cursor;if(this.nextMatches(ve.lookaheads())){var t=this.createRasterOp(),n=this.createClause();this.expect("onto");var i=this.createClause();return new ve(e,t,n,i)}throw new Error("Unexpected input")}},{key:"createRasterOp",value:function(){var e=this.cursor;if(this.nextMatches(we.lookaheads()))return this.expect("ror"),new we(e);if(this.nextMatches(_e.lookaheads()))return this.expect("rand"),new _e(e);if(this.nextMatches(ge.lookaheads()))return this.expect("xor"),new ge(e);if(this.nextMatches(me.lookaheads()))return this.expect("copy"),new me(e);if(this.nextMatches(Oe.lookaheads()))return this.expect("nand"),new Oe(e);if(this.nextMatches(Ee.lookaheads()))return this.expect("nor"),new Ee(e);if(this.nextMatches(je.lookaheads()))return this.expect("not"),new je(e);if(this.nextMatches(Te.lookaheads()))return this.expect("xnor"),new Te(e);throw new Error("Unexpected input")}},{key:"createClauseList",value:function(){var e=this.cursor;if(this.nextMatches(Ce.lookaheads())){for(var t=this.createClause(),n=[];this.nextMatches(this.lookaheads.ClauseListFollow);)n.push(this.createClauseListFollow());return new Ce(e,t,n)}throw new Error("Unexpected input")}},{key:"createClauseListFollow",value:function(){var e=this.cursor;if(this.nextMatches(Me.lookaheads())){this.expect(",");var t=this.createClause();return new Me(e,t)}throw new Error("Unexpected input")}},{key:"createExpression",value:function(){var e=this.cursor;if(this.nextMatches(Le.lookaheads())){for(var t=this.createExp1(),n=[];this.nextMatches(this.lookaheads.ExpressionFollow);)n.push(this.createExpressionFollow());return new Le(e,t,n)}throw new Error("Unexpected input")}},{key:"createExpressionFollow",value:function(){var e=this.cursor;if(this.nextMatches(Se.lookaheads())){this.expect("or");var t=this.createExp1();return new Se(e,t)}throw new Error("Unexpected input")}},{key:"createExp1",value:function(){var e=this.cursor;if(this.nextMatches(De.lookaheads())){for(var t=this.createExp2(),n=[];this.nextMatches(this.lookaheads.Exp1Follow);)n.push(this.createExp1Follow());return new De(e,t,n)}throw new Error("Unexpected input")}},{key:"createExp1Follow",value:function(){var e=this.cursor;if(this.nextMatches(Fe.lookaheads())){this.expect("and");var t=this.createExp2();return new Fe(e,t)}throw new Error("Unexpected input")}},{key:"createExp2",value:function(){var e=this.cursor;if(this.nextMatches(Pe.lookaheads())){for(var t=this.createExp2Tilde(),n=this.createExp3(),i=[];this.nextMatches(this.lookaheads.Exp2Op);)i.push(this.createExp2Op());return new Pe(e,t,n,i)}if(this.nextMatches(Ue.lookaheads())){for(var r=this.createExp3(),a=[];this.nextMatches(this.lookaheads.Exp2Op);)a.push(this.createExp2Op());return new Ue(e,r,a)}throw new Error("Unexpected input")}},{key:"createExp2Tilde",value:function(){var e=this.cursor;if(this.nextMatches(Ie.lookaheads()))return this.expect("~"),new Ie(e);throw new Error("Unexpected input")}},{key:"createExp2Op",value:function(){var e=this.cursor;if(this.nextMatches(Re.lookaheads())){var t=this.createRelOp(),n=this.createExp3();return new Re(e,t,n)}throw new Error("Unexpected input")}},{key:"createExp3",value:function(){var e=this.cursor;if(this.nextMatches(qe.lookaheads())){for(var t=this.createExp4(),n=[];this.nextMatches(this.lookaheads.Exp3Op);)n.push(this.createExp3Op());return new qe(e,t,n)}throw new Error("Unexpected input")}},{key:"createExp3Op",value:function(){var e=this.cursor;if(this.nextMatches(Ae.lookaheads())){var t=this.createAddOp(),n=this.createExp4();return new Ae(e,t,n)}throw new Error("Unexpected input")}},{key:"createExp4",value:function(){var e=this.cursor;if(this.nextMatches(We.lookaheads())){for(var t=this.createExp5(),n=[];this.nextMatches(this.lookaheads.Exp4Op);)n.push(this.createExp4Op());return new We(e,t,n)}throw new Error("Unexpected input")}},{key:"createExp4Op",value:function(){var e=this.cursor;if(this.nextMatches(Be.lookaheads())){var t=this.createMultOp(),n=this.createExp5();return new Be(e,t,n)}throw new Error("Unexpected input")}},{key:"createExp5",value:function(){var e=this.cursor;if(this.nextMatches(Ne.lookaheads())){for(var t=this.createAddOp(),n=this.createExp6(),i=[];this.nextMatches(this.lookaheads.Exp5Follow);)i.push(this.createExp5Follow());return new Ne(e,t,n,i)}if(this.nextMatches(Ke.lookaheads())){for(var r=this.createExp6(),a=[];this.nextMatches(this.lookaheads.Exp5Follow);)a.push(this.createExp5Follow());return new Ke(e,r,a)}throw new Error("Unexpected input")}},{key:"createExp5Follow",value:function(){var e=this.cursor;if(this.nextMatches(Ge.lookaheads())){this.expect("(");var t=this.createExpressionArg();return this.expect(")"),new Ge(e,t)}throw new Error("Unexpected input")}},{key:"createExpressionArg",value:function(){var e=this.cursor;if(this.nextMatches(Ve.lookaheads())){var t=this.createClause(),n=void 0;return this.nextMatches(this.lookaheads.ExpressionArgFollow)&&(n=this.createExpressionArgFollow()),new Ve(e,t,n)}throw new Error("Unexpected input")}},{key:"createExpressionArgFollow",value:function(){var e=this.cursor;if(this.nextMatches(Ye.lookaheads())){this.expect("|");var t=this.createClause();return new Ye(e,t)}if(this.nextMatches(ze.lookaheads())){this.expect(",");var n=this.createClauseList();return new ze(e,n)}throw new Error("Unexpected input")}},{key:"createExp6",value:function(){var e=this.cursor;if(this.nextMatches(Je.lookaheads())){this.expect("(");var t=this.createClause();return this.expect(")"),new Je(e,t)}if(this.nextMatches(He.lookaheads())){this.expect("begin");var n=void 0;return this.nextMatches(this.lookaheads.Sequence)&&(n=this.createSequence()),this.expect("end"),new He(e,n)}if(this.nextMatches(Xe.lookaheads())){this.expect("{");var i=void 0;return this.nextMatches(this.lookaheads.Sequence)&&(i=this.createSequence()),this.expect("}"),new Xe(e,i)}if(this.nextMatches(Qe.lookaheads())){var r=this.createStandardExp();return new Qe(e,r)}if(this.nextMatches(Ze.lookaheads())){var a=this.createLiteral();return new Ze(e,a)}if(this.nextMatches($e.lookaheads())){var o=this.createValueConstructor();return new $e(e,o)}if(this.nextMatches(et.lookaheads())){var s=this.createIdentifier();return new et(e,s)}throw new Error("Unexpected input")}},{key:"createValueConstructor",value:function(){var e=this.cursor;if(this.nextMatches(tt.lookaheads())){var t=this.createVectorConstr();return new tt(e,t)}if(this.nextMatches(nt.lookaheads())){var n=this.createImageConstr();return new nt(e,n)}if(this.nextMatches(it.lookaheads())){var i=this.createSubimageConstr();return new it(e,i)}if(this.nextMatches(rt.lookaheads())){var r=this.createPictureConstr();return new rt(e,r)}throw new Error("Unexpected input")}},{key:"createVectorConstr",value:function(){var e=this.cursor;if(this.nextMatches(at.lookaheads())){this.expect("vector");var t=this.createRange();this.expect("of");var n=this.createClause();return new at(e,t,n)}if(this.nextMatches(ot.lookaheads())){this.expect("@");var i=this.createClause();this.expect("of");var r=this.createType_();this.expect("[");for(var a=this.createClause(),o=[];this.nextMatches(this.lookaheads.VectorConstrFollow);)o.push(this.createVectorConstrFollow());return this.expect("]"),new ot(e,i,r,a,o)}throw new Error("Unexpected input")}},{key:"createVectorConstrFollow",value:function(){var e=this.cursor;if(this.nextMatches(st.lookaheads())){this.expect(",");var t=this.createClause();return new st(e,t)}throw new Error("Unexpected input")}},{key:"createRange",value:function(){var e=this.cursor;if(this.nextMatches(ct.lookaheads())){for(var t=this.createRangeEl(),n=[];this.nextMatches(this.lookaheads.RangeFollow);)n.push(this.createRangeFollow());return new ct(e,t,n)}throw new Error("Unexpected input")}},{key:"createRangeFollow",value:function(){var e=this.cursor;if(this.nextMatches(ut.lookaheads())){this.expect(",");var t=this.createRangeEl();return new ut(e,t)}throw new Error("Unexpected input")}},{key:"createRangeEl",value:function(){var e=this.cursor;if(this.nextMatches(lt.lookaheads())){var t=this.createClause();this.expect("::");var n=this.createClause();return new lt(e,t,n)}throw new Error("Unexpected input")}},{key:"createImageConstr",value:function(){var e=this.cursor;if(this.nextMatches(ht.lookaheads())){this.expect("image");var t=this.createClause();this.expect("by");var n=this.createClause();this.expect("of");var i=this.createClause();return new ht(e,t,n,i)}throw new Error("Unexpected input")}},{key:"createSubimageConstr",value:function(){var e=this.cursor;if(this.nextMatches(dt.lookaheads())){this.expect("limit");var t=this.createClause(),n=void 0;this.nextMatches(this.lookaheads.SubimageConstrMid)&&(n=this.createSubimageConstrMid());var i=void 0;return this.nextMatches(this.lookaheads.SubimageConstrEnd)&&(i=this.createSubimageConstrEnd()),new dt(e,t,n,i)}throw new Error("Unexpected input")}},{key:"createSubimageConstrMid",value:function(){var e=this.cursor;if(this.nextMatches(pt.lookaheads())){this.expect("to");var t=this.createClause();this.expect("by");var n=this.createClause();return new pt(e,t,n)}throw new Error("Unexpected input")}},{key:"createSubimageConstrEnd",value:function(){var e=this.cursor;if(this.nextMatches(ft.lookaheads())){this.expect("at");var t=this.createClause();this.expect(",");var n=this.createClause();return new ft(e,t,n)}throw new Error("Unexpected input")}},{key:"createPictureConstr",value:function(){var e=this.cursor;if(this.nextMatches(xt.lookaheads())){this.expect("shift");var t=this.createClause();this.expect("by");var n=this.createClause();this.expect(",");var i=this.createClause();return new xt(e,t,n,i)}if(this.nextMatches(bt.lookaheads())){this.expect("scale");var r=this.createClause();this.expect("by");var a=this.createClause();this.expect(",");var o=this.createClause();return new bt(e,r,a,o)}if(this.nextMatches(kt.lookaheads())){this.expect("rotate");var s=this.createClause();this.expect("by");var c=this.createClause();return new kt(e,s,c)}if(this.nextMatches(yt.lookaheads())){this.expect("colour");var u=this.createClause();this.expect("in");var l=this.createClause();return new yt(e,u,l)}if(this.nextMatches(vt.lookaheads())){this.expect("text");var h=this.createClause();this.expect("from");var d=this.createClause();this.expect(",");var p=this.createClause();this.expect("to");var f=this.createClause();this.expect(",");var x=this.createClause();return new vt(e,h,d,p,f,x)}if(this.nextMatches(wt.lookaheads())){this.expect("[");var b=this.createClause();this.expect(",");var k=this.createClause();return this.expect("]"),new wt(e,b,k)}throw new Error("Unexpected input")}},{key:"createLiteral",value:function(){var e=this.cursor;if(this.nextMatches(_t.lookaheads()))return this.expect("nil"),new _t(e);if(this.nextMatches(gt.lookaheads()))return this.expect("nullfile"),new gt(e);if(this.nextMatches(mt.lookaheads())){var t=this.createIntegerLiteral();return new mt(e,t)}if(this.nextMatches(Ot.lookaheads())){var n=this.createBooleanLiteral();return new Ot(e,n)}if(this.nextMatches(Et.lookaheads())){var i=this.createString_();return new Et(e,i)}if(this.nextMatches(jt.lookaheads())){var r=this.createPixelLiteral();return new jt(e,r)}throw new Error("Unexpected input")}},{key:"createIntegerLiteral",value:function(){var e=this.cursor;if(this.nextMatches(Tt.lookaheads())){var t=this.createNumber_();return new Tt(e,t)}throw new Error("Unexpected input")}},{key:"createBooleanLiteral",value:function(){var e=this.cursor;if(this.nextMatches(Ct.lookaheads()))return this.expect("true"),new Ct(e);if(this.nextMatches(Mt.lookaheads()))return this.expect("false"),new Mt(e);throw new Error("Unexpected input")}},{key:"createPixelLiteral",value:function(){var e=this.cursor;if(this.nextMatches(Lt.lookaheads())){this.expect("on");var t=void 0;return this.nextMatches(this.lookaheads.PixelLiteralFollow)&&(t=this.createPixelLiteralFollow()),new Lt(e,t)}if(this.nextMatches(St.lookaheads())){this.expect("off");var n=void 0;return this.nextMatches(this.lookaheads.PixelLiteralFollow)&&(n=this.createPixelLiteralFollow()),new St(e,n)}throw new Error("Unexpected input")}},{key:"createPixelLiteralFollow",value:function(){var e=this.cursor;if(this.nextMatches(Dt.lookaheads())){this.expect("&");var t=this.createPixelLiteral();return new Dt(e,t)}throw new Error("Unexpected input")}},{key:"createAddOp",value:function(){var e=this.cursor;if(this.nextMatches(Ft.lookaheads()))return this.expect("+"),new Ft(e);if(this.nextMatches(Pt.lookaheads()))return this.expect("-"),new Pt(e);throw new Error("Unexpected input")}},{key:"createMultOp",value:function(){var e=this.cursor;if(this.nextMatches(Ut.lookaheads()))return this.expect("++"),new Ut(e);if(this.nextMatches(It.lookaheads()))return this.expect("div"),new It(e);if(this.nextMatches(Rt.lookaheads()))return this.expect("rem"),new Rt(e);if(this.nextMatches(qt.lookaheads()))return this.expect("*"),new qt(e);if(this.nextMatches(At.lookaheads()))return this.expect("/"),new At(e);if(this.nextMatches(Wt.lookaheads()))return this.expect("^"),new Wt(e);if(this.nextMatches(Bt.lookaheads()))return this.expect("&"),new Bt(e);throw new Error("Unexpected input")}},{key:"createRelOp",value:function(){var e=this.cursor;if(this.nextMatches(Nt.lookaheads())){var t=this.createEqOp();return new Nt(e,t)}if(this.nextMatches(Kt.lookaheads())){var n=this.createComparOp();return new Kt(e,n)}if(this.nextMatches(Gt.lookaheads())){var i=this.createTypeOp();return new Gt(e,i)}throw new Error("Unexpected input")}},{key:"createEqOp",value:function(){var e=this.cursor;if(this.nextMatches(Vt.lookaheads()))return this.expect("="),new Vt(e);if(this.nextMatches(Yt.lookaheads()))return this.expect("~="),new Yt(e);throw new Error("Unexpected input")}},{key:"createComparOp",value:function(){var e=this.cursor;if(this.nextMatches(zt.lookaheads()))return this.expect("<="),new zt(e);if(this.nextMatches(Jt.lookaheads()))return this.expect("<"),new Jt(e);if(this.nextMatches(Ht.lookaheads()))return this.expect(">="),new Ht(e);if(this.nextMatches(Xt.lookaheads()))return this.expect(">"),new Xt(e);throw new Error("Unexpected input")}},{key:"createTypeOp",value:function(){var e=this.cursor;if(this.nextMatches(Qt.lookaheads()))return this.expect("is"),new Qt(e);if(this.nextMatches(Zt.lookaheads()))return this.expect("isnt"),new Zt(e);throw new Error("Unexpected input")}},{key:"createIdentifier",value:function(){var e=this.cursor;if(this.nextMatches($t.lookaheads())){var t=this.createId_();return new $t(e,t)}if(this.nextMatches(en.lookaheads())){var n=this.createStandardId();return new en(e,n)}throw new Error("Unexpected input")}},{key:"createStandardExp",value:function(){var e=this.cursor;if(this.nextMatches(tn.lookaheads())){var t=this.createStandardName();return new tn(e,t)}throw new Error("Unexpected input")}},{key:"createStandardName",value:function(){var e=this.cursor;if(this.nextMatches(nn.lookaheads()))return this.expect("upb"),new nn(e);if(this.nextMatches(rn.lookaheads()))return this.expect("lwb"),new rn(e);if(this.nextMatches(an.lookaheads()))return this.expect("eof"),new an(e);if(this.nextMatches(on.lookaheads()))return this.expect("read.a.line"),new on(e);if(this.nextMatches(sn.lookaheads()))return this.expect("read"),new sn(e);if(this.nextMatches(cn.lookaheads()))return this.expect("readi"),new cn(e);if(this.nextMatches(un.lookaheads()))return this.expect("readr"),new un(e);if(this.nextMatches(ln.lookaheads()))return this.expect("readb"),new ln(e);if(this.nextMatches(hn.lookaheads()))return this.expect("peek"),new hn(e);if(this.nextMatches(dn.lookaheads()))return this.expect("reads"),new dn(e);if(this.nextMatches(pn.lookaheads()))return this.expect("read.name"),new pn(e);if(this.nextMatches(fn.lookaheads()))return this.expect("read.byte"),new fn(e);if(this.nextMatches(xn.lookaheads()))return this.expect("read.16"),new xn(e);if(this.nextMatches(bn.lookaheads()))return this.expect("read.32"),new bn(e);throw new Error("Unexpected input")}},{key:"createStandardId",value:function(){var e=this.cursor;if(this.nextMatches(kn.lookaheads()))return this.expect("r.w"),new kn(e);if(this.nextMatches(yn.lookaheads()))return this.expect("i.w"),new yn(e);if(this.nextMatches(vn.lookaheads()))return this.expect("s.w"),new vn(e);if(this.nextMatches(wn.lookaheads()))return this.expect("s.o"),new wn(e);if(this.nextMatches(_n.lookaheads()))return this.expect("s.i"),new _n(e);if(this.nextMatches(gn.lookaheads()))return this.expect("maxint"),new gn(e);if(this.nextMatches(mn.lookaheads()))return this.expect("maxreal"),new mn(e);if(this.nextMatches(On.lookaheads()))return this.expect("epsilon"),new On(e);if(this.nextMatches(En.lookaheads()))return this.expect("pi"),new En(e);if(this.nextMatches(jn.lookaheads()))return this.expect("cursor"),new jn(e);if(this.nextMatches(Tn.lookaheads()))return this.expect("screen"),new Tn(e);throw new Error("Unexpected input")}}]),e}(),h=function(){function e(t,n){Object(a.a)(this,e),this.pos=t,this.sequence=n}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["let","structure","procedure","forward","if","repeat","while","for","case","abort","write","output","out.byte","out.16","out.32","ror","rand","xor","copy","nand","nor","not","xnor","~","+","-","(","begin","{","upb","lwb","eof","read.a.line","read","readi","readr","readb","peek","reads","read.name","read.byte","read.16","read.32","nil","nullfile","__NUMBER","true","false","__STRING","on","off","vector","@","image","limit","shift","scale","rotate","colour","text","[","__ID","r.w","i.w","s.w","s.o","s.i","maxint","maxreal","epsilon","pi","cursor","screen"]}}]),e}(),d=function(){function e(t,n,i){Object(a.a)(this,e),this.pos=t,this.sequenceEl=n,this.sequenceFollow=i}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["let","structure","procedure","forward","if","repeat","while","for","case","abort","write","output","out.byte","out.16","out.32","ror","rand","xor","copy","nand","nor","not","xnor","~","+","-","(","begin","{","upb","lwb","eof","read.a.line","read","readi","readr","readb","peek","reads","read.name","read.byte","read.16","read.32","nil","nullfile","__NUMBER","true","false","__STRING","on","off","vector","@","image","limit","shift","scale","rotate","colour","text","[","__ID","r.w","i.w","s.w","s.o","s.i","maxint","maxreal","epsilon","pi","cursor","screen"]}}]),e}(),p=function(){function e(t,n){Object(a.a)(this,e),this.pos=t,this.sequenceEl=n}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return[";"]}}]),e}(),f=function(){function e(t,n){Object(a.a)(this,e),this.pos=t,this.declaration=n}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["let","structure","procedure","forward"]}}]),e}(),x=function(){function e(t,n){Object(a.a)(this,e),this.pos=t,this.clause=n}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["if","repeat","while","for","case","abort","write","output","out.byte","out.16","out.32","ror","rand","xor","copy","nand","nor","not","xnor","~","+","-","(","begin","{","upb","lwb","eof","read.a.line","read","readi","readr","readb","peek","reads","read.name","read.byte","read.16","read.32","nil","nullfile","__NUMBER","true","false","__STRING","on","off","vector","@","image","limit","shift","scale","rotate","colour","text","[","__ID","r.w","i.w","s.w","s.o","s.i","maxint","maxreal","epsilon","pi","cursor","screen"]}}]),e}(),b=function(){function e(t,n){Object(a.a)(this,e),this.pos=t,this.letDecl=n}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["let"]}}]),e}(),k=function(){function e(t,n){Object(a.a)(this,e),this.pos=t,this.structureDecl=n}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["structure"]}}]),e}(),y=function(){function e(t,n){Object(a.a)(this,e),this.pos=t,this.procDecl=n}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["procedure"]}}]),e}(),v=function(){function e(t,n){Object(a.a)(this,e),this.pos=t,this.forward=n}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["forward"]}}]),e}(),w=function(){function e(t,n,i,r){Object(a.a)(this,e),this.pos=t,this.identifier=n,this.initOp=i,this.clause=r}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["let"]}}]),e}(),_=function(){function e(t){Object(a.a)(this,e),this.pos=t}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["="]}}]),e}(),g=function(){function e(t){Object(a.a)(this,e),this.pos=t}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return[":="]}}]),e}(),m=function(){function e(t,n,i){Object(a.a)(this,e),this.pos=t,this.identifier=n,this.structureDeclFields=i}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["structure"]}}]),e}(),O=function(){function e(t,n){Object(a.a)(this,e),this.pos=t,this.fieldList=n}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["("]}}]),e}(),E=function(){function e(t,n,i){Object(a.a)(this,e),this.pos=t,this.fieldListEl=n,this.fieldListFollow=i}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["__TYPE"]}}]),e}(),j=function(){function e(t,n){Object(a.a)(this,e),this.pos=t,this.fieldListEl=n}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return[";"]}}]),e}(),T=function(){function e(t,n,i){Object(a.a)(this,e),this.pos=t,this.type=n,this.identifierList=i}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["__TYPE"]}}]),e}(),C=function(){function e(t,n,i,r){Object(a.a)(this,e),this.pos=t,this.identifier=n,this.procDeclType=i,this.clause=r}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["procedure"]}}]),e}(),M=function(){function e(t,n,i){Object(a.a)(this,e),this.pos=t,this.parameterList=n,this.returnTypex=i}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["("]}}]),e}(),L=function(){function e(t,n,i){Object(a.a)(this,e),this.pos=t,this.parameter=n,this.parameterListFollow=i}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["__TYPE","structure","("]}}]),e}(),S=function(){function e(t,n){Object(a.a)(this,e),this.pos=t,this.parameter=n}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return[";"]}}]),e}(),D=function(){function e(t,n,i){Object(a.a)(this,e),this.pos=t,this.type=n,this.identifierList=i}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["__TYPE"]}}]),e}(),F=function(){function e(t,n){Object(a.a)(this,e),this.pos=t,this.structureDecl=n}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["structure"]}}]),e}(),P=function(){function e(t,n,i){Object(a.a)(this,e),this.pos=t,this.procType=n,this.identifierList=i}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["("]}}]),e}(),U=function(){function e(t,n,i){Object(a.a)(this,e),this.pos=t,this.ptypeList=n,this.returnTypex=i}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["("]}}]),e}(),I=function(){function e(t,n){Object(a.a)(this,e),this.pos=t,this.type=n}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["->"]}}]),e}(),R=function(){function e(t,n,i){Object(a.a)(this,e),this.pos=t,this.ptypeListEl=n,this.ptypeListFollow=i}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["__TYPE","(","structure"]}}]),e}(),q=function(){function e(t,n){Object(a.a)(this,e),this.pos=t,this.ptypeListEl=n}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return[","]}}]),e}(),A=function(){function e(t,n){Object(a.a)(this,e),this.pos=t,this.type=n}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["__TYPE"]}}]),e}(),W=function(){function e(t,n){Object(a.a)(this,e),this.pos=t,this.procType=n}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["("]}}]),e}(),B=function(){function e(t,n){Object(a.a)(this,e),this.pos=t,this.sDecl=n}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["structure"]}}]),e}(),N=function(){function e(t,n,i){Object(a.a)(this,e),this.pos=t,this.type=n,this.sDeclFollow=i}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["structure"]}}]),e}(),K=function(){function e(t,n){Object(a.a)(this,e),this.pos=t,this.type=n}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return[","]}}]),e}(),G=function(){function e(t,n,i){Object(a.a)(this,e),this.pos=t,this.identifier=n,this.procType=i}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["forward"]}}]),e}(),V=function(){function e(t,n,i){Object(a.a)(this,e),this.pos=t,this.identifier=n,this.identifierListFollow=i}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["__ID","r.w","i.w","s.w","s.o","s.i","maxint","maxreal","epsilon","pi","cursor","screen"]}}]),e}(),Y=function(){function e(t,n){Object(a.a)(this,e),this.pos=t,this.identifier=n}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return[","]}}]),e}(),z=function(){function e(t,n,i){Object(a.a)(this,e),this.pos=t,this.clause=n,this.ifClauseThen=i}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["if"]}}]),e}(),J=function(){function e(t,n,i,r){Object(a.a)(this,e),this.pos=t,this.repeat=n,this.whilex=i,this.clauseDo=r}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["repeat"]}}]),e}(),H=function(){function e(t,n,i){Object(a.a)(this,e),this.pos=t,this.whilex=n,this.dox=i}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["while"]}}]),e}(),X=function(){function e(t,n,i,r,o,s){Object(a.a)(this,e),this.pos=t,this.identifier=n,this.from=i,this.to=r,this.clauseBy=o,this.dox=s}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["for"]}}]),e}(),Q=function(){function e(t,n,i,r){Object(a.a)(this,e),this.pos=t,this.casex=n,this.caseList=i,this.defaultx=r}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["case"]}}]),e}(),Z=function(){function e(t){Object(a.a)(this,e),this.pos=t}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["abort"]}}]),e}(),$=function(){function e(t,n){Object(a.a)(this,e),this.pos=t,this.writeClause=n}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["write","output","out.byte","out.16","out.32"]}}]),e}(),ee=function(){function e(t,n){Object(a.a)(this,e),this.pos=t,this.raster=n}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["ror","rand","xor","copy","nand","nor","not","xnor"]}}]),e}(),te=function(){function e(t,n,i){Object(a.a)(this,e),this.pos=t,this.expression=n,this.clauseExprFollow=i}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["~","+","-","(","begin","{","upb","lwb","eof","read.a.line","read","readi","readr","readb","peek","reads","read.name","read.byte","read.16","read.32","nil","nullfile","__NUMBER","true","false","__STRING","on","off","vector","@","image","limit","shift","scale","rotate","colour","text","[","__ID","r.w","i.w","s.w","s.o","s.i","maxint","maxreal","epsilon","pi","cursor","screen"]}}]),e}(),ne=function(){function e(t,n){Object(a.a)(this,e),this.pos=t,this.clause=n}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["do"]}}]),e}(),ie=function(){function e(t,n){Object(a.a)(this,e),this.pos=t,this.clause=n}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["by"]}}]),e}(),re=function(){function e(t,n){Object(a.a)(this,e),this.pos=t,this.clause=n}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return[":="]}}]),e}(),ae=function(){function e(t,n){Object(a.a)(this,e),this.pos=t,this.clause=n}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["do"]}}]),e}(),oe=function(){function e(t,n,i){Object(a.a)(this,e),this.pos=t,this.then=n,this.elsex=i}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["then"]}}]),e}(),se=function(){function e(t,n,i){Object(a.a)(this,e),this.pos=t,this.caseListEl=n,this.caseListFollow=i}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["if","repeat","while","for","case","abort","write","output","out.byte","out.16","out.32","ror","rand","xor","copy","nand","nor","not","xnor","~","+","-","(","begin","{","upb","lwb","eof","read.a.line","read","readi","readr","readb","peek","reads","read.name","read.byte","read.16","read.32","nil","nullfile","__NUMBER","true","false","__STRING","on","off","vector","@","image","limit","shift","scale","rotate","colour","text","[","__ID","r.w","i.w","s.w","s.o","s.i","maxint","maxreal","epsilon","pi","cursor","screen"]}}]),e}(),ce=function(){function e(t,n){Object(a.a)(this,e),this.pos=t,this.caseListEl=n}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return[";"]}}]),e}(),ue=function(){function e(t,n,i){Object(a.a)(this,e),this.pos=t,this.clauseList=n,this.clause=i}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["if","repeat","while","for","case","abort","write","output","out.byte","out.16","out.32","ror","rand","xor","copy","nand","nor","not","xnor","~","+","-","(","begin","{","upb","lwb","eof","read.a.line","read","readi","readr","readb","peek","reads","read.name","read.byte","read.16","read.32","nil","nullfile","__NUMBER","true","false","__STRING","on","off","vector","@","image","limit","shift","scale","rotate","colour","text","[","__ID","r.w","i.w","s.w","s.o","s.i","maxint","maxreal","epsilon","pi","cursor","screen"]}}]),e}(),le=function(){function e(t,n){Object(a.a)(this,e),this.pos=t,this.writeList=n}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["write"]}}]),e}(),he=function(){function e(t,n,i){Object(a.a)(this,e),this.pos=t,this.clause=n,this.writeList=i}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["output"]}}]),e}(),de=function(){function e(t,n,i,r){Object(a.a)(this,e),this.pos=t,this.clause=n,this.b=i,this.c=r}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["out.byte"]}}]),e}(),pe=function(){function e(t,n,i,r){Object(a.a)(this,e),this.pos=t,this.clause=n,this.b=i,this.c=r}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["out.16"]}}]),e}(),fe=function(){function e(t,n,i){Object(a.a)(this,e),this.pos=t,this.clause=n,this.b=i}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["out.32"]}}]),e}(),xe=function(){function e(t,n,i){Object(a.a)(this,e),this.pos=t,this.writeListEl=n,this.writeListFollow=i}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["if","repeat","while","for","case","abort","write","output","out.byte","out.16","out.32","ror","rand","xor","copy","nand","nor","not","xnor","~","+","-","(","begin","{","upb","lwb","eof","read.a.line","read","readi","readr","readb","peek","reads","read.name","read.byte","read.16","read.32","nil","nullfile","__NUMBER","true","false","__STRING","on","off","vector","@","image","limit","shift","scale","rotate","colour","text","[","__ID","r.w","i.w","s.w","s.o","s.i","maxint","maxreal","epsilon","pi","cursor","screen"]}}]),e}(),be=function(){function e(t,n){Object(a.a)(this,e),this.pos=t,this.writeListEl=n}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return[","]}}]),e}(),ke=function(){function e(t,n,i){Object(a.a)(this,e),this.pos=t,this.clause=n,this.writeListElFollow=i}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["if","repeat","while","for","case","abort","write","output","out.byte","out.16","out.32","ror","rand","xor","copy","nand","nor","not","xnor","~","+","-","(","begin","{","upb","lwb","eof","read.a.line","read","readi","readr","readb","peek","reads","read.name","read.byte","read.16","read.32","nil","nullfile","__NUMBER","true","false","__STRING","on","off","vector","@","image","limit","shift","scale","rotate","colour","text","[","__ID","r.w","i.w","s.w","s.o","s.i","maxint","maxreal","epsilon","pi","cursor","screen"]}}]),e}(),ye=function(){function e(t,n){Object(a.a)(this,e),this.pos=t,this.clause=n}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return[":"]}}]),e}(),ve=function(){function e(t,n,i,r){Object(a.a)(this,e),this.pos=t,this.rasterOp=n,this.thisx=i,this.that=r}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["ror","rand","xor","copy","nand","nor","not","xnor"]}}]),e}(),we=function(){function e(t){Object(a.a)(this,e),this.pos=t}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["ror"]}}]),e}(),_e=function(){function e(t){Object(a.a)(this,e),this.pos=t}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["rand"]}}]),e}(),ge=function(){function e(t){Object(a.a)(this,e),this.pos=t}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["xor"]}}]),e}(),me=function(){function e(t){Object(a.a)(this,e),this.pos=t}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["copy"]}}]),e}(),Oe=function(){function e(t){Object(a.a)(this,e),this.pos=t}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["nand"]}}]),e}(),Ee=function(){function e(t){Object(a.a)(this,e),this.pos=t}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["nor"]}}]),e}(),je=function(){function e(t){Object(a.a)(this,e),this.pos=t}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["not"]}}]),e}(),Te=function(){function e(t){Object(a.a)(this,e),this.pos=t}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["xnor"]}}]),e}(),Ce=function(){function e(t,n,i){Object(a.a)(this,e),this.pos=t,this.clause=n,this.clauseListFollow=i}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["if","repeat","while","for","case","abort","write","output","out.byte","out.16","out.32","ror","rand","xor","copy","nand","nor","not","xnor","~","+","-","(","begin","{","upb","lwb","eof","read.a.line","read","readi","readr","readb","peek","reads","read.name","read.byte","read.16","read.32","nil","nullfile","__NUMBER","true","false","__STRING","on","off","vector","@","image","limit","shift","scale","rotate","colour","text","[","__ID","r.w","i.w","s.w","s.o","s.i","maxint","maxreal","epsilon","pi","cursor","screen"]}}]),e}(),Me=function(){function e(t,n){Object(a.a)(this,e),this.pos=t,this.clause=n}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return[","]}}]),e}(),Le=function(){function e(t,n,i){Object(a.a)(this,e),this.pos=t,this.exp1=n,this.expressionFollow=i}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["~","+","-","(","begin","{","upb","lwb","eof","read.a.line","read","readi","readr","readb","peek","reads","read.name","read.byte","read.16","read.32","nil","nullfile","__NUMBER","true","false","__STRING","on","off","vector","@","image","limit","shift","scale","rotate","colour","text","[","__ID","r.w","i.w","s.w","s.o","s.i","maxint","maxreal","epsilon","pi","cursor","screen"]}}]),e}(),Se=function(){function e(t,n){Object(a.a)(this,e),this.pos=t,this.exp1=n}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["or"]}}]),e}(),De=function(){function e(t,n,i){Object(a.a)(this,e),this.pos=t,this.exp2=n,this.exp1Follow=i}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["~","+","-","(","begin","{","upb","lwb","eof","read.a.line","read","readi","readr","readb","peek","reads","read.name","read.byte","read.16","read.32","nil","nullfile","__NUMBER","true","false","__STRING","on","off","vector","@","image","limit","shift","scale","rotate","colour","text","[","__ID","r.w","i.w","s.w","s.o","s.i","maxint","maxreal","epsilon","pi","cursor","screen"]}}]),e}(),Fe=function(){function e(t,n){Object(a.a)(this,e),this.pos=t,this.exp2=n}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["and"]}}]),e}(),Pe=function(){function e(t,n,i,r){Object(a.a)(this,e),this.pos=t,this.exp2Tilde=n,this.exp3=i,this.exp2Op=r}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["~"]}}]),e}(),Ue=function(){function e(t,n,i){Object(a.a)(this,e),this.pos=t,this.exp3=n,this.exp2Op=i}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["+","-","(","begin","{","upb","lwb","eof","read.a.line","read","readi","readr","readb","peek","reads","read.name","read.byte","read.16","read.32","nil","nullfile","__NUMBER","true","false","__STRING","on","off","vector","@","image","limit","shift","scale","rotate","colour","text","[","__ID","r.w","i.w","s.w","s.o","s.i","maxint","maxreal","epsilon","pi","cursor","screen"]}}]),e}(),Ie=function(){function e(t){Object(a.a)(this,e),this.pos=t}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["~"]}}]),e}(),Re=function(){function e(t,n,i){Object(a.a)(this,e),this.pos=t,this.relOp=n,this.exp3=i}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["=","~=","<=","<",">=",">","is","isnt"]}}]),e}(),qe=function(){function e(t,n,i){Object(a.a)(this,e),this.pos=t,this.exp4=n,this.exp3Op=i}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["+","-","(","begin","{","upb","lwb","eof","read.a.line","read","readi","readr","readb","peek","reads","read.name","read.byte","read.16","read.32","nil","nullfile","__NUMBER","true","false","__STRING","on","off","vector","@","image","limit","shift","scale","rotate","colour","text","[","__ID","r.w","i.w","s.w","s.o","s.i","maxint","maxreal","epsilon","pi","cursor","screen"]}}]),e}(),Ae=function(){function e(t,n,i){Object(a.a)(this,e),this.pos=t,this.addOp=n,this.exp4=i}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["+","-"]}}]),e}(),We=function(){function e(t,n,i){Object(a.a)(this,e),this.pos=t,this.exp5=n,this.exp4Op=i}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["+","-","(","begin","{","upb","lwb","eof","read.a.line","read","readi","readr","readb","peek","reads","read.name","read.byte","read.16","read.32","nil","nullfile","__NUMBER","true","false","__STRING","on","off","vector","@","image","limit","shift","scale","rotate","colour","text","[","__ID","r.w","i.w","s.w","s.o","s.i","maxint","maxreal","epsilon","pi","cursor","screen"]}}]),e}(),Be=function(){function e(t,n,i){Object(a.a)(this,e),this.pos=t,this.multOp=n,this.exp5=i}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["++","div","rem","*","/","^","&"]}}]),e}(),Ne=function(){function e(t,n,i,r){Object(a.a)(this,e),this.pos=t,this.addOp=n,this.exp6=i,this.exp5Follow=r}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["+","-"]}}]),e}(),Ke=function(){function e(t,n,i){Object(a.a)(this,e),this.pos=t,this.exp6=n,this.exp5Follow=i}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["(","begin","{","upb","lwb","eof","read.a.line","read","readi","readr","readb","peek","reads","read.name","read.byte","read.16","read.32","nil","nullfile","__NUMBER","true","false","__STRING","on","off","vector","@","image","limit","shift","scale","rotate","colour","text","[","__ID","r.w","i.w","s.w","s.o","s.i","maxint","maxreal","epsilon","pi","cursor","screen"]}}]),e}(),Ge=function(){function e(t,n){Object(a.a)(this,e),this.pos=t,this.expressionArg=n}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["("]}}]),e}(),Ve=function(){function e(t,n,i){Object(a.a)(this,e),this.pos=t,this.clause=n,this.expressionArgFollow=i}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["if","repeat","while","for","case","abort","write","output","out.byte","out.16","out.32","ror","rand","xor","copy","nand","nor","not","xnor","~","+","-","(","begin","{","upb","lwb","eof","read.a.line","read","readi","readr","readb","peek","reads","read.name","read.byte","read.16","read.32","nil","nullfile","__NUMBER","true","false","__STRING","on","off","vector","@","image","limit","shift","scale","rotate","colour","text","[","__ID","r.w","i.w","s.w","s.o","s.i","maxint","maxreal","epsilon","pi","cursor","screen"]}}]),e}(),Ye=function(){function e(t,n){Object(a.a)(this,e),this.pos=t,this.clause=n}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["|"]}}]),e}(),ze=function(){function e(t,n){Object(a.a)(this,e),this.pos=t,this.clauseList=n}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return[","]}}]),e}(),Je=function(){function e(t,n){Object(a.a)(this,e),this.pos=t,this.clause=n}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["("]}}]),e}(),He=function(){function e(t,n){Object(a.a)(this,e),this.pos=t,this.sequence=n}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["begin"]}}]),e}(),Xe=function(){function e(t,n){Object(a.a)(this,e),this.pos=t,this.sequence=n}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["{"]}}]),e}(),Qe=function(){function e(t,n){Object(a.a)(this,e),this.pos=t,this.standardExp=n}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["upb","lwb","eof","read.a.line","read","readi","readr","readb","peek","reads","read.name","read.byte","read.16","read.32"]}}]),e}(),Ze=function(){function e(t,n){Object(a.a)(this,e),this.pos=t,this.literal=n}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["nil","nullfile","__NUMBER","true","false","__STRING","on","off"]}}]),e}(),$e=function(){function e(t,n){Object(a.a)(this,e),this.pos=t,this.valueConstructor=n}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["vector","@","image","limit","shift","scale","rotate","colour","text","["]}}]),e}(),et=function(){function e(t,n){Object(a.a)(this,e),this.pos=t,this.identifier=n}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["__ID","r.w","i.w","s.w","s.o","s.i","maxint","maxreal","epsilon","pi","cursor","screen"]}}]),e}(),tt=function(){function e(t,n){Object(a.a)(this,e),this.pos=t,this.vectorConstr=n}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["vector","@"]}}]),e}(),nt=function(){function e(t,n){Object(a.a)(this,e),this.pos=t,this.imageConstr=n}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["image"]}}]),e}(),it=function(){function e(t,n){Object(a.a)(this,e),this.pos=t,this.subimageConstr=n}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["limit"]}}]),e}(),rt=function(){function e(t,n){Object(a.a)(this,e),this.pos=t,this.pictureConstr=n}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["shift","scale","rotate","colour","text","["]}}]),e}(),at=function(){function e(t,n,i){Object(a.a)(this,e),this.pos=t,this.range=n,this.clause=i}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["vector"]}}]),e}(),ot=function(){function e(t,n,i,r,o){Object(a.a)(this,e),this.pos=t,this.clause=n,this.type=i,this.b=r,this.vectorConstrFollow=o}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["@"]}}]),e}(),st=function(){function e(t,n){Object(a.a)(this,e),this.pos=t,this.clause=n}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return[","]}}]),e}(),ct=function(){function e(t,n,i){Object(a.a)(this,e),this.pos=t,this.rangeEl=n,this.rangeFollow=i}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["if","repeat","while","for","case","abort","write","output","out.byte","out.16","out.32","ror","rand","xor","copy","nand","nor","not","xnor","~","+","-","(","begin","{","upb","lwb","eof","read.a.line","read","readi","readr","readb","peek","reads","read.name","read.byte","read.16","read.32","nil","nullfile","__NUMBER","true","false","__STRING","on","off","vector","@","image","limit","shift","scale","rotate","colour","text","[","__ID","r.w","i.w","s.w","s.o","s.i","maxint","maxreal","epsilon","pi","cursor","screen"]}}]),e}(),ut=function(){function e(t,n){Object(a.a)(this,e),this.pos=t,this.rangeEl=n}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return[","]}}]),e}(),lt=function(){function e(t,n,i){Object(a.a)(this,e),this.pos=t,this.a=n,this.b=i}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["if","repeat","while","for","case","abort","write","output","out.byte","out.16","out.32","ror","rand","xor","copy","nand","nor","not","xnor","~","+","-","(","begin","{","upb","lwb","eof","read.a.line","read","readi","readr","readb","peek","reads","read.name","read.byte","read.16","read.32","nil","nullfile","__NUMBER","true","false","__STRING","on","off","vector","@","image","limit","shift","scale","rotate","colour","text","[","__ID","r.w","i.w","s.w","s.o","s.i","maxint","maxreal","epsilon","pi","cursor","screen"]}}]),e}(),ht=function(){function e(t,n,i,r){Object(a.a)(this,e),this.pos=t,this.image=n,this.by=i,this.of=r}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["image"]}}]),e}(),dt=function(){function e(t,n,i,r){Object(a.a)(this,e),this.pos=t,this.clause=n,this.subimageConstrMid=i,this.subimageConstrEnd=r}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["limit"]}}]),e}(),pt=function(){function e(t,n,i){Object(a.a)(this,e),this.pos=t,this.to=n,this.by=i}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["to"]}}]),e}(),ft=function(){function e(t,n,i){Object(a.a)(this,e),this.pos=t,this.at1=n,this.at2=i}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["at"]}}]),e}(),xt=function(){function e(t,n,i,r){Object(a.a)(this,e),this.pos=t,this.clause=n,this.b=i,this.c=r}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["shift"]}}]),e}(),bt=function(){function e(t,n,i,r){Object(a.a)(this,e),this.pos=t,this.clause=n,this.b=i,this.c=r}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["scale"]}}]),e}(),kt=function(){function e(t,n,i){Object(a.a)(this,e),this.pos=t,this.clause=n,this.b=i}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["rotate"]}}]),e}(),yt=function(){function e(t,n,i){Object(a.a)(this,e),this.pos=t,this.clause=n,this.b=i}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["colour"]}}]),e}(),vt=function(){function e(t,n,i,r,o,s){Object(a.a)(this,e),this.pos=t,this.clause=n,this.b=i,this.c=r,this.d=o,this.e=s}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["text"]}}]),e}(),wt=function(){function e(t,n,i){Object(a.a)(this,e),this.pos=t,this.clause=n,this.b=i}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["["]}}]),e}(),_t=function(){function e(t){Object(a.a)(this,e),this.pos=t}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["nil"]}}]),e}(),gt=function(){function e(t){Object(a.a)(this,e),this.pos=t}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["nullfile"]}}]),e}(),mt=function(){function e(t,n){Object(a.a)(this,e),this.pos=t,this.integerLiteral=n}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["__NUMBER"]}}]),e}(),Ot=function(){function e(t,n){Object(a.a)(this,e),this.pos=t,this.booleanLiteral=n}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["true","false"]}}]),e}(),Et=function(){function e(t,n){Object(a.a)(this,e),this.pos=t,this.string=n}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["__STRING"]}}]),e}(),jt=function(){function e(t,n){Object(a.a)(this,e),this.pos=t,this.pixelLiteral=n}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["on","off"]}}]),e}(),Tt=function(){function e(t,n){Object(a.a)(this,e),this.pos=t,this.number=n}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["__NUMBER"]}}]),e}(),Ct=function(){function e(t){Object(a.a)(this,e),this.pos=t}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["true"]}}]),e}(),Mt=function(){function e(t){Object(a.a)(this,e),this.pos=t}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["false"]}}]),e}(),Lt=function(){function e(t,n){Object(a.a)(this,e),this.pos=t,this.pixelLiteralFollow=n}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["on"]}}]),e}(),St=function(){function e(t,n){Object(a.a)(this,e),this.pos=t,this.pixelLiteralFollow=n}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["off"]}}]),e}(),Dt=function(){function e(t,n){Object(a.a)(this,e),this.pos=t,this.pixelLiteral=n}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["&"]}}]),e}(),Ft=function(){function e(t){Object(a.a)(this,e),this.pos=t}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["+"]}}]),e}(),Pt=function(){function e(t){Object(a.a)(this,e),this.pos=t}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["-"]}}]),e}(),Ut=function(){function e(t){Object(a.a)(this,e),this.pos=t}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["++"]}}]),e}(),It=function(){function e(t){Object(a.a)(this,e),this.pos=t}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["div"]}}]),e}(),Rt=function(){function e(t){Object(a.a)(this,e),this.pos=t}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["rem"]}}]),e}(),qt=function(){function e(t){Object(a.a)(this,e),this.pos=t}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["*"]}}]),e}(),At=function(){function e(t){Object(a.a)(this,e),this.pos=t}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["/"]}}]),e}(),Wt=function(){function e(t){Object(a.a)(this,e),this.pos=t}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["^"]}}]),e}(),Bt=function(){function e(t){Object(a.a)(this,e),this.pos=t}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["&"]}}]),e}(),Nt=function(){function e(t,n){Object(a.a)(this,e),this.pos=t,this.eqOp=n}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["=","~="]}}]),e}(),Kt=function(){function e(t,n){Object(a.a)(this,e),this.pos=t,this.comparOp=n}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["<=","<",">=",">"]}}]),e}(),Gt=function(){function e(t,n){Object(a.a)(this,e),this.pos=t,this.typeOp=n}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["is","isnt"]}}]),e}(),Vt=function(){function e(t){Object(a.a)(this,e),this.pos=t}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["="]}}]),e}(),Yt=function(){function e(t){Object(a.a)(this,e),this.pos=t}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["~="]}}]),e}(),zt=function(){function e(t){Object(a.a)(this,e),this.pos=t}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["<="]}}]),e}(),Jt=function(){function e(t){Object(a.a)(this,e),this.pos=t}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["<"]}}]),e}(),Ht=function(){function e(t){Object(a.a)(this,e),this.pos=t}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return[">="]}}]),e}(),Xt=function(){function e(t){Object(a.a)(this,e),this.pos=t}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return[">"]}}]),e}(),Qt=function(){function e(t){Object(a.a)(this,e),this.pos=t}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["is"]}}]),e}(),Zt=function(){function e(t){Object(a.a)(this,e),this.pos=t}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["isnt"]}}]),e}(),$t=function(){function e(t,n){Object(a.a)(this,e),this.pos=t,this.id=n}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["__ID"]}}]),e}(),en=function(){function e(t,n){Object(a.a)(this,e),this.pos=t,this.standardId=n}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["r.w","i.w","s.w","s.o","s.i","maxint","maxreal","epsilon","pi","cursor","screen"]}}]),e}(),tn=function(){function e(t,n){Object(a.a)(this,e),this.pos=t,this.standardName=n}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["upb","lwb","eof","read.a.line","read","readi","readr","readb","peek","reads","read.name","read.byte","read.16","read.32"]}}]),e}(),nn=function(){function e(t){Object(a.a)(this,e),this.pos=t}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["upb"]}}]),e}(),rn=function(){function e(t){Object(a.a)(this,e),this.pos=t}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["lwb"]}}]),e}(),an=function(){function e(t){Object(a.a)(this,e),this.pos=t}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["eof"]}}]),e}(),on=function(){function e(t){Object(a.a)(this,e),this.pos=t}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["read.a.line"]}}]),e}(),sn=function(){function e(t){Object(a.a)(this,e),this.pos=t}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["read"]}}]),e}(),cn=function(){function e(t){Object(a.a)(this,e),this.pos=t}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["readi"]}}]),e}(),un=function(){function e(t){Object(a.a)(this,e),this.pos=t}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["readr"]}}]),e}(),ln=function(){function e(t){Object(a.a)(this,e),this.pos=t}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["readb"]}}]),e}(),hn=function(){function e(t){Object(a.a)(this,e),this.pos=t}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["peek"]}}]),e}(),dn=function(){function e(t){Object(a.a)(this,e),this.pos=t}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["reads"]}}]),e}(),pn=function(){function e(t){Object(a.a)(this,e),this.pos=t}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["read.name"]}}]),e}(),fn=function(){function e(t){Object(a.a)(this,e),this.pos=t}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["read.byte"]}}]),e}(),xn=function(){function e(t){Object(a.a)(this,e),this.pos=t}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["read.16"]}}]),e}(),bn=function(){function e(t){Object(a.a)(this,e),this.pos=t}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["read.32"]}}]),e}(),kn=function(){function e(t){Object(a.a)(this,e),this.pos=t}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["r.w"]}}]),e}(),yn=function(){function e(t){Object(a.a)(this,e),this.pos=t}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["i.w"]}}]),e}(),vn=function(){function e(t){Object(a.a)(this,e),this.pos=t}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["s.w"]}}]),e}(),wn=function(){function e(t){Object(a.a)(this,e),this.pos=t}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["s.o"]}}]),e}(),_n=function(){function e(t){Object(a.a)(this,e),this.pos=t}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["s.i"]}}]),e}(),gn=function(){function e(t){Object(a.a)(this,e),this.pos=t}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["maxint"]}}]),e}(),mn=function(){function e(t){Object(a.a)(this,e),this.pos=t}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["maxreal"]}}]),e}(),On=function(){function e(t){Object(a.a)(this,e),this.pos=t}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["epsilon"]}}]),e}(),En=function(){function e(t){Object(a.a)(this,e),this.pos=t}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["pi"]}}]),e}(),jn=function(){function e(t){Object(a.a)(this,e),this.pos=t}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["cursor"]}}]),e}(),Tn=function(){function e(t){Object(a.a)(this,e),this.pos=t}return Object(r.a)(e,null,[{key:"lookaheads",value:function(){return["screen"]}}]),e}()},16:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i="! Escher's Square Limit.  Adapted 2020\n\ndraw.scale(610, 410)\n\nprocedure mp(-> pic)\nbegin\n  let i = nil; let it := nil\n  it := nil; d.nl(it, 0, 3); d.nl(it, 3, 4); d.nl(it, 0, 8); d.nl(it, 0, 3); d.ad(it, i)\n  it := nil; d.nl(it, 0, 3); d.nl(it, 3, 4); d.nl(it, 0, 8); d.nl(it, 0, 3); d.ad(it, i)\n  it := nil; d.nl(it, 6, 0); d.nl(it, 4, 4); d.ad(it, i)\n  it := nil; d.nl(it, 4, 5); d.nl(it, 7, 6); d.nl(it, 4, 10); d.nl(it, 4, 5); d.ad(it, i)\n  it := nil; d.nl(it, 11, 0); d.nl(it, 10, 4); d.nl(it, 9, 6); d.nl(it, 8, 8); d.nl(it, 4, 13); d.nl(it, 0, 16); d.ad(it, i)\n  it := nil; d.nl(it, 11, 0); d.nl(it, 14, 2); d.nl(it, 16, 2); d.ad(it, i)\n  it := nil; d.nl(it, 10, 4); d.nl(it, 13, 5); d.nl(it, 16, 4); d.ad(it, i)\n  it := nil; d.nl(it, 9, 6); d.nl(it, 12, 7); d.nl(it, 16, 6); d.ad(it, i)\n  it := nil; d.nl(it, 8, 8); d.nl(it, 12, 9); d.nl(it, 16, 8); d.ad(it, i)\n  it := nil; d.nl(it, 8, 12); d.nl(it, 16, 10); d.ad(it, i)\n  it := nil; d.nl(it, 0, 16); d.nl(it, 5, 15); d.nl(it, 8, 16); d.ad(it, i)\n  it := nil; d.nl(it, 8, 16); d.nl(it, 12, 12); d.nl(it, 16, 12); d.ad(it, i)\n  it := nil; d.nl(it, 10, 16); d.nl(it, 12, 14); d.nl(it, 16, 13); d.ad(it, i)\n  it := nil; d.nl(it, 12, 16); d.nl(it, 13, 15); d.nl(it, 16, 14); d.ad(it, i)\n  it := nil; d.nl(it, 14, 16); d.nl(it, 16, 15); d.ad(it, i)\n  scale i by 1/16, 1/16\nend\n\nprocedure mq(-> pic)\nbegin\n  let i = nil; let it := nil\n  it := nil; d.nl(it, 0, 12); d.nl(it, 3, 13); d.nl(it, 5, 14); d.nl(it, 7, 15); d.nl(it, 8, 16); d.ad(it, i)\n  it := nil; d.nl(it, 0, 0); d.nl(it, 0, 8); d.ad(it, i)\n  it := nil; d.nl(it, 0, 12); d.nl(it, 0, 16); d.ad(it, i)\n  it := nil; d.nl(it, 2, 16); d.nl(it, 3, 13); d.ad(it, i)\n  it := nil; d.nl(it, 4, 16); d.nl(it, 5, 14); d.ad(it, i)\n  it := nil; d.nl(it, 6, 16); d.nl(it, 7, 15); d.ad(it, i)\n  it := nil; d.nl(it, 0, 10); d.nl(it, 7, 11); d.ad(it, i)\n  it := nil; d.nl(it, 8, 15); d.nl(it, 11, 15); d.nl(it, 9, 13); d.nl(it, 8, 15); d.ad(it, i)\n  it := nil; d.nl(it, 9, 12); d.nl(it, 12, 12); d.nl(it, 10, 10); d.nl(it, 9, 12); d.ad(it, i)\n  it := nil; d.nl(it, 0, 8); d.nl(it, 4, 7); d.nl(it, 6, 7); d.nl(it, 8, 8); d.nl(it, 10, 9); d.nl(it, 12, 10); d.nl(it, 16, 16); d.ad(it, i)\n  it := nil; d.nl(it, 4, 7); d.nl(it, 4, 5); d.nl(it, 2, 0); d.ad(it, i)\n  it := nil; d.nl(it, 6, 7); d.nl(it, 6, 5); d.nl(it, 4, 0); d.ad(it, i)\n  it := nil; d.nl(it, 8, 8); d.nl(it, 8, 5); d.nl(it, 6, 0); d.ad(it, i)\n  it := nil; d.nl(it, 10, 9); d.nl(it, 10, 6); d.nl(it, 8, 0); d.ad(it, i)\n  it := nil; d.nl(it, 14, 11); d.nl(it, 10, 0); d.ad(it, i)\n  it := nil; d.nl(it, 12, 0); d.nl(it, 13, 4); d.nl(it, 16, 8); d.nl(it, 15, 10); d.nl(it, 16, 16); d.ad(it, i)\n  it := nil; d.nl(it, 13, 0); d.nl(it, 16, 6); d.ad(it, i)\n  it := nil; d.nl(it, 14, 0); d.nl(it, 16, 4); d.ad(it, i)\n  it := nil; d.nl(it, 15, 0); d.nl(it, 16, 2); d.ad(it, i)\n  scale i by 1/16, 1/16\nend\n\nprocedure mr(-> pic)\nbegin\n  let i = nil; let it := nil\n  it := nil; d.nl(it, 0, 16); d.nl(it, 1, 14); d.nl(it, 2, 12); d.nl(it, 5, 10); d.nl(it, 8, 8); d.nl(it, 14, 6); d.nl(it, 16, 4); d.ad(it, i)\n  it := nil; d.nl(it, 0, 12); d.nl(it, 1, 14); d.ad(it, i)\n  it := nil; d.nl(it, 0, 8); d.nl(it, 2, 12); d.ad(it, i)\n  it := nil; d.nl(it, 0, 4); d.nl(it, 5, 10); d.ad(it, i)\n  it := nil; d.nl(it, 0, 0); d.nl(it, 8, 8); d.ad(it, i)\n  it := nil; d.nl(it, 1, 1); d.nl(it, 4, 0); d.ad(it, i)\n  it := nil; d.nl(it, 2, 2); d.nl(it, 8, 0); d.ad(it, i)\n  it := nil; d.nl(it, 3, 3); d.nl(it, 8, 2); d.nl(it, 12, 0); d.ad(it, i)\n  it := nil; d.nl(it, 5, 5); d.nl(it, 12, 3); d.nl(it, 16, 0); d.ad(it, i)\n  it := nil; d.nl(it, 6, 16); d.nl(it, 11, 10); d.nl(it, 16, 6); d.ad(it, i)\n  it := nil; d.nl(it, 11, 16); d.nl(it, 12, 12); d.nl(it, 16, 8); d.ad(it, i)\n  it := nil; d.nl(it, 12, 12); d.nl(it, 16, 16); d.ad(it, i)\n  it := nil; d.nl(it, 13, 13); d.nl(it, 16, 10); d.ad(it, i)\n  it := nil; d.nl(it, 14, 14); d.nl(it, 16, 12); d.ad(it, i)\n  it := nil; d.nl(it, 15, 15); d.nl(it, 16, 14); d.ad(it, i)\n  scale i by 1/16, 1/16\nend\n\nprocedure ms(-> pic)\nbegin\n  let i = nil; let it := nil\n  it := nil; d.nl(it, 0, 0); d.nl(it, 4, 2); d.nl(it, 8, 2); d.nl(it, 16, 0); d.ad(it, i)\n  it := nil; d.nl(it, 0, 16); d.nl(it, 8, 16); d.ad(it, i)\n  it := nil; d.nl(it, 12, 16); d.nl(it, 16, 16); d.ad(it, i)\n  it := nil; d.nl(it, 2, 1); d.nl(it, 0, 4); d.ad(it, i)\n  it := nil; d.nl(it, 0, 6); d.nl(it, 7, 4); d.ad(it, i)\n  it := nil; d.nl(it, 0, 8); d.nl(it, 8, 6); d.ad(it, i)\n  it := nil; d.nl(it, 0, 10); d.nl(it, 7, 8); d.ad(it, i)\n  it := nil; d.nl(it, 0, 12); d.nl(it, 7, 10); d.ad(it, i)\n  it := nil; d.nl(it, 0, 14); d.nl(it, 7, 13); d.ad(it, i)\n  it := nil; d.nl(it, 8, 16); d.nl(it, 7, 13); d.nl(it, 7, 8); d.nl(it, 8, 6); d.nl(it, 10, 4); d.nl(it, 16, 0); d.ad(it, i)\n  it := nil; d.nl(it, 10, 16); d.nl(it, 11, 10); d.ad(it, i)\n  it := nil; d.nl(it, 12, 16); d.nl(it, 13, 13); d.nl(it, 15, 9); d.nl(it, 16, 8); d.ad(it, i)\n  it := nil; d.nl(it, 13, 13); d.nl(it, 16, 14); d.ad(it, i)\n  it := nil; d.nl(it, 14, 11); d.nl(it, 16, 12); d.ad(it, i)\n  it := nil; d.nl(it, 15, 9); d.nl(it, 16, 10); d.ad(it, i)\n  it := nil; d.nl(it, 12, 4); d.nl(it, 12, 7); d.nl(it, 10, 6); d.nl(it, 12, 4); d.ad(it, i)\n  it := nil; d.nl(it, 15, 5); d.nl(it, 15, 8); d.nl(it, 13, 7); d.nl(it, 15, 5); d.ad(it, i)\n  scale i by 1/16, 1/16\nend\n\nprocedure rot(cpic p -> pic)\n  shift rotate p by -90 by 1,0\n\nprocedure beside(cint m, n; cpic p, q -> pic)\nbegin\n  let p1 = scale p by m / (m + n), 1\n  let q1 = scale q by n / (m + n), 1\n  let q2 = shift q1 by m / (m + n), 0\n  \n  d.ad(q2, p1)\n  p1\nend\n\nprocedure above(cint m, n; cpic p, q -> pic)\nbegin\n  let p1 = scale p by 1, m / (m + n)\n  let q1 = scale q by 1, n / (m + n)\n  let p2 = shift p1 by 0, n / (m + n)\n  \n  d.ad(p2, q1)\n  q1\nend\n\nprocedure nonet(cpic p1, p2, p3, p4, p5, p6, p7, p8, p9 -> pic)\n  above(1, 2, beside(1, 2, p1, beside(1, 1, p2, p3)),\n    above(1, 1, beside(1, 2, p4, beside(1, 1, p5, p6)),\n      beside(1, 2, p7, beside(1, 1, p8, p9))))\n\nprocedure quartet(cpic p1, p2, p3, p4 -> pic)\n  above(1, 1, beside(1, 1, p1, p2), beside(1, 1, p3, p4))\n\nprocedure cycle(cpic p1 -> pic)\n  quartet(p1, rot(rot(rot(p1))), rot(p1), rot(rot(p1)))\n\nlet p = mp\nlet q = mq\nlet r = mr\nlet s = ms\n\nlet t = quartet(p, q, r, s)\nlet u = cycle(rot(q))\nlet side1 = quartet(nil, nil, rot(t), t)\nlet side2 = quartet(side1, side1, rot(t), t)\nlet corner1 = quartet(nil, nil, nil, u)\nlet corner2 = quartet(corner1, side1, rot(side1), u)\nlet corner = nonet(corner2, side2, side2, rot(side2), u, rot(t), rot(side2), rot(t), rot(q))\nlet square.limit = cycle(corner)\n\ndraw.image(square.limit)\n"},18:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i="\nforward reads.prompt(string -> string)\nforward readi.prompt(string -> int)\nforward draw.scale(int, int)\nforward draw.line(#pixel, int, int, int, int)\nforward draw.image(#pixel)\n\nforward d.nl(#pixel, int, int)\nforward d.ad(#pixel, #pixel)\n"},22:function(e,t,n){"use strict";n.d(t,"b",(function(){return h})),n.d(t,"a",(function(){return w}));var i,r=n(6),a=n(2),o=n(0),s=n(36),c=n(31),u=n(38),l=n(1),h=function(e){Object(c.a)(n,e);var t=Object(s.a)(n);function n(e,i){var r;return Object(o.a)(this,n),(r=t.call(this)).pos=e,r.message=i,r.message=r.message.replace(/\.!/,""),r}return n}(Object(u.a)(Error));!function(e){e[e.CONST=0]="CONST",e[e.VAR=1]="VAR"}(i||(i={}));var d=function e(t,n,i){Object(o.a)(this,e),this.identifier=t,this.accessType=n,this.type=i},p=function e(t,n){Object(o.a)(this,e),this.identifier=t,this.fields=n},f=function e(t,n,i){Object(o.a)(this,e),this.identifier=t,this.parameters=n,this.returnType=i},x=function e(t,n){Object(o.a)(this,e),this.fields=t,this.returnType=n},b=function e(t){Object(o.a)(this,e),this.types=t},k=function e(t,n){Object(o.a)(this,e),this.identifier=t,this.procType=n},y=function e(){Object(o.a)(this,e),this.types={}},v=function(){function e(){Object(o.a)(this,e),this.stores=[new y]}return Object(a.a)(e,[{key:"currStore",value:function(){return this.stores[this.stores.length-1]}},{key:"popStore",value:function(){this.stores.pop()}},{key:"pushStore",value:function(){this.stores.push(new y)}},{key:"getStoredType",value:function(e,t){var n=function(t){var n=t.types;if(e in n)return n[e]};if(t){var i=n(this.currStore());if(i)return i}else for(var r=this.stores.length-1;r>=0;r--){var a=n(this.stores[r]);if(a)return a}}}]),e}(),w=function(){function e(t){Object(o.a)(this,e),this.program=t,this.typeStack=new v}return Object(a.a)(e,[{key:"run",value:function(){this.seedTypes(),this.getTypeProgram(this.program)}},{key:"seedTypes",value:function(){for(var e=this.typeStack.currStore(),t=0,n=[["s.w",".!number"],["options","*cstring"],["environment","*cstring"],["read.a.line","string"],["readi",".!number"],["readr",".!number"],["readb","boolean"],["peek","string"],["reads","string"],["read.byte",".!number"],["read.16",".!number"],["read.32",".!number"]];t<n.length;t++){var r=n[t];e.types[r[0]]=new d(r[0],i.VAR,r[1])}e.types.dump=new f("dump",{a:"nonvoid"},"void"),e.types.length=new f("length",{a:"vector"},".!number"),e.types.upb=new f("upb",{a:"vector"},".!number"),e.types.lwb=new f("lwb",{a:"vector"},".!number"),e.types.close=new f("close",{a:"cfile"},"void"),e.types["find.substr"]=new f("find.substr",{a:"cstring",b:"cstring"},".!number"),e.types.decode=new f("decode",{a:"cstring"},".!number"),e.types["b.or"]=new f("b.or",{a:"cint",b:"cint"},".!number"),e.types.trace=new f("trace",{},"void"),e.types["shift.l"]=new f("shift.l",{a:"cint",b:"cint"},".!number"),e.types["fiddle.r"]=new f("fiddle.r",{a:"creal"},"*number"),e.types.code=new f("code",{a:"cint"},"string"),e.types.read=new f("read",{a:"nonvoid"},"string"),e.types["read.name"]=new f("read.name",{a:"nonvoid",b:"nonvoid"},"string"),e.types.eof=new f("eof",{a:"nonvoid"},"bool"),e.types.iformat=new f("iformat",{a:"cint"},"string"),e.types.float=new f("float",{a:".!number"},".!number"),e.types.digit=new f("digit",{a:"cstring"},"bool"),e.types.letter=new f("letter",{a:"cstring"},"bool")}},{key:"expectType",value:function(e,t,n){if(t&&n){var i=[".!number"];i.includes(t)||(t=this.resolveType(t)),i.includes(n)||(n=this.resolveType(n));var r=this.typeStack.getStoredType(n,!1);if("string"===typeof r)n=r;else if(r instanceof d)n=r.type;else if(r instanceof k)return;var a=this.typeStack.getStoredType(t,!1);if("string"===typeof a)t=a;else if(a instanceof d)t=a.type;else if(a instanceof k)return;for(var o=["const","clause"];n.startsWith("c")&&!o.includes(n);)n=n.slice(1);for(;t.startsWith("c")&&!o.includes(t);)t=t.slice(1);var s={int:".!number",real:".!number"},c=Object.keys(s);if(c.includes(t)&&(t=s[t]),c.includes(n)&&(n=s[n]),t!==n&&"pntr"!==t&&"pntr"!==n){var u={type:function(e){return this.nonvoid(e)||!0},nonvoid:function(e){return"void"!==e},literal:function(e){return["pixel","pntr","file"].includes(e)||this.writeable(e)},writeable:function(e){return["bool"].includes(e)||this.ordered(e)},ordered:function(e){return[".!number","string"].includes(e)},image:function(e){return["#pixel","#cpixel"].includes(e)},vector:function(e){return e.startsWith("*")?this.nonvoid(e.substr(1)):!!e.startsWith("*c")&&this.nonvoid(e.substr(2))}},l=!1;if("type"===t)l=u.type(n);else if("nonvoid"===t)l=u.nonvoid(n);else if("literal"===t)l=u.literal(n);else if("writeable"===t)l=u.writeable(n);else if("ordered"===t)l=u.ordered(n);else if("image"===t)l=u.image(n);else{if("vector"!==t&&!t.startsWith("*"))throw new h(e,"Expected type ".concat(t,", received type ").concat(n));l=u.vector(n)}if(!l)throw new h(e,"Expected type ".concat(t,", received type ").concat(n))}}}},{key:"requireSoftID",value:function(e){return e instanceof l.J?this.getTypeStandardId(e.standardId):e.id.val}},{key:"idFromClause",value:function(e){if(e instanceof l.l&&e.expression.exp1.exp2.exp3.exp4.exp5.exp6 instanceof l.F)return this.requireSoftID(e.expression.exp1.exp2.exp3.exp4.exp5.exp6.identifier);throw new h(e.pos,"Can only index using exact ID of field")}},{key:"matchStructureCreation",value:function(e,t,n){var i=Object.keys(t.fields).length,r=n.length;if(i!==r)throw new h(e,"Expected ".concat(i," fields ")+"for structure, received ".concat(r," fields"));for(var a=0;a<i;a++){var o=Object.values(t.fields)[a],s=this.getTypeClause(n[a]);this.expectType(n[a].pos,o,s)}}},{key:"matchProcCall",value:function(e,t,n){for(var i=0;i<n.length;i++){var r=n[i],a=this.resolveType(this.getTypeClause(r)),o=Object.values(t.parameters)[i];"string"===typeof o&&this.expectType(r.pos,o,a)}}},{key:"resolveType",value:function(e){if(!e)return"";var t,n=this.typeStack.getStoredType(e,!1);return"string"===typeof n?t=n:n instanceof d?t=n.type:n instanceof f&&(t=n.returnType),t||e}},{key:"pullStructureDecl",value:function(e){var t=this,n=this.requireSoftID(e.identifier);if(this.typeStack.getStoredType(n,!0))throw new h(e.identifier.pos,"Identifier already used");var i={};if(e.structureDeclFields&&e.structureDeclFields.fieldList){var r=e.structureDeclFields.fieldList,a=function(e){var n=e.type.val,r=t.requireSoftID(e.identifierList.identifier);i[r]=n,e.identifierList.identifierListFollow.forEach((function(e){var r=t.requireSoftID(e.identifier);i[r]=n}))};a(r.fieldListEl),r.fieldListFollow.forEach((function(e){return a(e.fieldListEl)}))}return new p(n,i)}},{key:"pullProcType",value:function(e){var t=this,n=[],i=function(e){if(e instanceof l.kb)n.push(e.type.val);else if(e instanceof l.lb)n.push(t.pullProcType(e.procType));else if(e instanceof l.mb){var i=[],r=e.sDecl;i.push(r.type.val),r.sDeclFollow.forEach((function(e){return i.push(e.type.val)})),n.push(new b(i))}};e.ptypeList&&(i(e.ptypeList.ptypeListEl),e.ptypeList.ptypeListFollow.forEach((function(e){return i(e.ptypeListEl)})));var r=e.returnTypex&&e.returnTypex.type.val;return new x(n,r)}},{key:"pullProcDecl",value:function(e){var t=this,n=this.requireSoftID(e.identifier),i=this.typeStack.getStoredType(n,!0);if(i&&!(i instanceof k))throw new h(e.identifier.pos,"Identifier already used");var r={},a=void 0;if(e.procDeclType){var o=function(e){if(e instanceof l.ab){var n=e.type.val,i=t.requireSoftID(e.identifierList.identifier);r[i]=n,e.identifierList.identifierListFollow.forEach((function(e){var i=t.requireSoftID(e.identifier);r[i]=n}))}else if(e instanceof l.bb){var a=t.pullStructureDecl(e.structureDecl);r[a.identifier]=a}else if(e instanceof l.cb){var o=t.pullProcType(e.procType),s=t.requireSoftID(e.identifierList.identifier);r[s]=o,e.identifierList.identifierListFollow.forEach((function(e){var n=t.requireSoftID(e.identifier);r[n]=o}))}},s=e.procDeclType.parameterList;s&&(o(s.parameter),s.parameterListFollow.forEach((function(e){return o(e.parameter)})));var c=e.procDeclType.returnTypex;c&&(a=c.type.val)}return new f(n,r,a||"void")}},{key:"getTypeProgram",value:function(e){this.getTypeSequence(e.sequence)}},{key:"getTypeSequence",value:function(e){var t=this,n=void 0;return n=this.getTypeSequenceEl(e.sequenceEl),e.sequenceFollow.forEach((function(e){n=t.getTypeSequenceFollow(e)})),n}},{key:"getTypeSequenceFollow",value:function(e){return this.getTypeSequenceEl(e.sequenceEl)}},{key:"getTypeSequenceEl",value:function(e){var t=void 0;return e instanceof l.qb?t=this.getTypeDeclaration(e.declaration):e instanceof l.rb&&(t=this.getTypeClause(e.clause)),t}},{key:"getTypeDeclaration",value:function(e){var t=void 0;return e instanceof l.q?t=this.getTypeLetDecl(e.letDecl):e instanceof l.r?t=this.getTypeStructureDecl(e.structureDecl):e instanceof l.s?t=this.getTypeProcDecl(e.procDecl):e instanceof l.t&&(t=this.getTypeForward(e.forward)),t}},{key:"getTypeLetDecl",value:function(e){var t=void 0,n=this.requireSoftID(e.identifier);if(this.typeStack.getStoredType(n,!0))throw new h(e.identifier.pos,"Identifier already used");if(!(t=this.getTypeClause(e.clause)))throw new h(e.clause.pos,"Did not return type");return t=this.resolveType(t),this.typeStack.currStore().types[n]=new d(n,e.initOp instanceof l.M?i.CONST:i.VAR,t),t}},{key:"getTypeStructureDecl",value:function(e){var t=this.pullStructureDecl(e);this.typeStack.currStore().types[t.identifier]=t}},{key:"getTypeProcDecl",value:function(e){var t=this.pullProcDecl(e);this.typeStack.currStore().types[t.identifier]=t,this.typeStack.pushStore();var n=this.typeStack.currStore();Object.keys(t.parameters).forEach((function(e){return n.types[e]=t.parameters[e]}));var i=this.getTypeClause(e.clause);return i=this.resolveType(i),"void"!==t.returnType&&this.expectType(e.pos,t.returnType,i),this.typeStack.popStore(),i}},{key:"getTypeForward",value:function(e){var t=this.requireSoftID(e.identifier);if(this.typeStack.getStoredType(t,!0))throw new h(e.pos,"identifier already used");var n=e.procType&&this.pullProcType(e.procType),i=new k(t,n);this.typeStack.currStore().types[t]=i}},{key:"getTypeClause",value:function(e){var t=this,n=void 0,r=function(e){t.typeStack.pushStore(),e(),t.typeStack.popStore()};if(e instanceof l.d){this.typeStack.pushStore();var a=this.getTypeClause(e.clause);this.expectType(e.clause.pos,"bool",a);var o=e.ifClauseThen;if(o instanceof l.K)n=this.getTypeClause(o.clause);else if(o instanceof l.L){var s=this.getTypeClause(o.then),c=this.getTypeClause(o.elsex);this.expectType(o.elsex.pos,s,c),n=s}n=this.resolveType(n),this.typeStack.popStore()}else if(e instanceof l.e){this.typeStack.pushStore();var u=this.getTypeClause(e.repeat);this.typeStack.popStore();var p=this.getTypeClause(e.whilex);if(this.expectType(e.whilex.pos,"bool",p),e.clauseDo){var f=this.getTypeClause(e.clauseDo.clause);this.expectType(e.clauseDo.clause.pos,u,f)}n=u}else if(e instanceof l.f){this.typeStack.pushStore(),n=this.getTypeClause(e.dox);var x=this.getTypeClause(e.whilex);this.expectType(e.whilex.pos,"bool",x),this.typeStack.popStore()}else if(e instanceof l.g){this.typeStack.pushStore();var b=this.requireSoftID(e.identifier);this.typeStack.currStore().types[b]=new d(b,i.VAR,".!number");var k=this.getTypeClause(e.from);this.expectType(e.from.pos,".!number",k);var y=this.getTypeClause(e.to);if(this.expectType(e.to.pos,".!number",y),e.clauseBy){var v=this.getTypeClause(e.clauseBy.clause);this.expectType(e.clauseBy.clause.pos,".!number",v)}this.typeStack.pushStore();var w=this.getTypeClause(e.dox);this.typeStack.popStore(),n=w,this.typeStack.popStore()}else if(e instanceof l.h){var _=this.resolveType(this.getTypeClause(e.casex));this.expectType(e.casex.pos,"nonvoid",_);var g=this.resolveType(this.getTypeClause(e.defaultx));n=g;var m=function(e){r((function(){return t.expectType(e.clauseList.clause.pos,_,t.resolveType(t.getTypeClause(e.clauseList.clause)))})),e.clauseList.clauseListFollow.forEach((function(e){return r((function(){return t.expectType(e.pos,_,t.resolveType(t.getTypeClause(e)))}))})),r((function(){return t.expectType(e.clause.pos,g,t.resolveType(t.getTypeClause(e.clause)))}))};m(e.caseList.caseListEl),e.caseList.caseListFollow.forEach((function(e){return m(e.caseListEl)}))}else if(e instanceof l.i);else if(e instanceof l.j)n=this.getTypeWriteClause(e.writeClause);else if(e instanceof l.k)n=this.getTypeRaster(e.raster);else if(e instanceof l.l){var O=this.getTypeExpression(e.expression);if(e.clauseExprFollow){if("string"!==typeof O)throw new h(e.expression.pos,"Unable to set variable");var E=this.typeStack.getStoredType(O,!1);if(E){if(!(E instanceof d))throw new h(e.expression.pos,"Unable to set variable");if(E.accessType===i.CONST)throw new h(e.expression.pos,"Unable to modify constant variable ".concat(E.identifier," type ").concat(E.type));var j=this.getTypeClause(e.clauseExprFollow.clause);this.expectType(e.clauseExprFollow.clause.pos,E.type,j)}else n=O}else n=O}return n}},{key:"getTypeWriteClause",value:function(e){e instanceof l.Zb?this.getTypeWriteList(e.writeList):e instanceof l.ac?(this.expectType(e.clause.pos,"file",this.getTypeClause(e.clause)),this.getTypeWriteList(e.writeList)):e instanceof l.bc||e instanceof l.cc?(this.expectType(e.clause.pos,"file",this.getTypeClause(e.clause)),this.expectType(e.b.pos,".!number",this.getTypeClause(e.b)),this.expectType(e.c.pos,".!number",this.getTypeClause(e.c))):e instanceof l.dc&&(this.expectType(e.clause.pos,"file",this.getTypeClause(e.clause)),this.expectType(e.b.pos,".!number",this.getTypeClause(e.b)))}},{key:"getTypeWriteList",value:function(e){var t=this,n=function(e){t.expectType(e.clause.pos,"writeable",t.getTypeClause(e.clause)),e.writeListElFollow&&t.expectType(e.writeListElFollow.clause.pos,".!number",t.getTypeClause(e.writeListElFollow.clause))};n(e.writeListEl),e.writeListFollow.forEach((function(e){return n(e.writeListEl)}))}},{key:"getTypeRaster",value:function(e){this.expectType(e.thisx.pos,"image",this.getTypeClause(e.thisx)),this.expectType(e.that.pos,"#pixel",this.getTypeClause(e.that))}},{key:"getTypeExpression",value:function(e){var t=this,n=void 0;return e.expressionFollow.length>0?(n="bool",this.expectType(e.exp1.pos,"bool",this.getTypeExp1(e.exp1)),e.expressionFollow.forEach((function(e){return t.expectType(e.exp1.pos,"bool",t.getTypeExp1(e.exp1))}))):n=this.getTypeExp1(e.exp1),n}},{key:"getTypeExp1",value:function(e){var t=this,n=void 0;return e.exp1Follow.length>0?(n="bool",this.expectType(e.exp2.pos,"bool",this.getTypeExp2(e.exp2)),e.exp1Follow.forEach((function(e){return t.expectType(e.exp2.pos,"bool",t.getTypeExp2(e.exp2))}))):n=this.getTypeExp2(e.exp2),n}},{key:"getTypeExp2",value:function(e){var t=this,n=void 0,i=function(){n="bool";var i=t.getTypeExp3(e.exp3);e.exp2Op.forEach((function(n){var r=t.getTypeExp3(n.exp3);if(n.relOp instanceof l.nb)t.expectType(n.pos,"nonvoid",r),t.expectType(n.pos,t.resolveType(i),r);else if(n.relOp instanceof l.ob)t.expectType(n.pos,"ordered",r),t.expectType(n.pos,t.resolveType(i),r);else if(n.relOp instanceof l.pb){if(t.expectType(e.exp3.pos,"pntr",i),!r)throw new h(n.exp3.pos,"Expected structure identifier");var a=t.typeStack.getStoredType(r,!1);if(!a||!(a instanceof p))throw new h(n.exp3.pos,"Expected structure identifier")}i="bool"}))};return e instanceof l.w?i():e instanceof l.x&&(e.exp2Op.length>0?i():n=this.getTypeExp3(e.exp3)),n}},{key:"getTypeExp3",value:function(e){var t=this,n=void 0;return e.exp3Op.length>0?(this.expectType(e.exp4.pos,".!number",this.getTypeExp4(e.exp4)),e.exp3Op.forEach((function(e){return t.expectType(e.exp4.pos,".!number",t.getTypeExp4(e.exp4))})),n=".!number"):n=this.getTypeExp4(e.exp4),n}},{key:"getTypeExp4",value:function(e){var t=this,n=void 0;return e.exp4Op.length>0?e.exp4Op[0].multOp instanceof l.T?(this.expectType(e.exp5.pos,"string",this.getTypeExp5(e.exp5)),e.exp4Op.forEach((function(e){return t.expectType(e.exp5.pos,"string",t.getTypeExp5(e.exp5))})),n="string"):(this.expectType(e.exp5.pos,".!number",this.getTypeExp5(e.exp5)),e.exp4Op.forEach((function(e){return t.expectType(e.exp5.pos,".!number",t.getTypeExp5(e.exp5))})),n=".!number"):n=this.getTypeExp5(e.exp5),n}},{key:"getTypeExp5",value:function(e){var t=this,n=void 0;n=this.getTypeExp6(e.exp6);var i=function i(r){if("string"!==typeof n)throw new h(e.exp6.pos,"Unable to index");n=t.resolveType(n);var a=t.typeStack.getStoredType(n,!1);if(a instanceof p){e.exp6.v_type="struct";var o=t.idFromClause(r[0]),s=a.fields[o];if(!s)throw new h(r[0].pos,"Unable to match field ".concat(o));n=s,r.length>1&&i(r.slice(1))}else{for(;n.startsWith("c");)n=n.slice(1);if("pntr"===n)return;if(!n.startsWith("*"))throw new h(e.exp6.pos,"Unable to index ".concat(n," ").concat(r));t.expectType(r[0].pos,".!number",t.getTypeClause(r[0])),n=n.slice(1),r.length>1&&i(r.slice(1))}};if(n&&e.exp5Follow.length>0){var a,o=Object(r.a)(e.exp5Follow);try{for(o.s();!(a=o.n()).done;){var s=a.value;if(!n)throw new h(e.exp6.pos,"Unable to operate on void type");var c=s.expressionArg;(!c.expressionArgFollow||c.expressionArgFollow instanceof l.H)&&function(){var r=[c.clause];c.expressionArgFollow&&(r.push(c.expressionArgFollow.clauseList.clause),c.expressionArgFollow.clauseList.clauseListFollow.map((function(e){return r.push(e.clause)})));var a=t.typeStack.getStoredType(n,!1);if(a instanceof p){t.matchStructureCreation(e.pos,a,r),n=a.identifier;["const","STRUCTURE"].includes(n)&&(n="pntr")}else a instanceof f?(t.matchProcCall(e.pos,a,r),n=a.returnType):a instanceof k||(a instanceof d?"clause"!==a.type&&i(r):i(r))}()}}catch(u){o.e(u)}finally{o.f()}}return n}},{key:"getTypeExp6",value:function(e){var t=void 0;if(e instanceof l.z)t=this.getTypeClause(e.clause);else if(e instanceof l.A)e.sequence&&(t=this.getTypeSequence(e.sequence));else if(e instanceof l.B)e.sequence&&(t=this.getTypeSequence(e.sequence));else if(e instanceof l.C)t=this.getTypeStandardExp(e.standardExp);else if(e instanceof l.D)t=this.getTypeLiteral(e.literal);else if(e instanceof l.E)e.v_type="vector",t=this.getTypeValueConstructor(e.valueConstructor);else if(e instanceof l.F){var n=this.requireSoftID(e.identifier),i=this.typeStack.getStoredType(n,!1);if(!i)throw new h(e.identifier.pos,"Type ".concat(n," does not exist"));if("string"===typeof i)t=i;else if(i instanceof d)t=i.identifier;else if(i instanceof f)t=i.identifier;else if(i instanceof p)t=i.identifier;else{if(!(i instanceof k))throw new h(e.identifier.pos,"Type ".concat(i," not expected"));t=i.identifier}}return t}},{key:"getTypeValueConstructor",value:function(e){var t=void 0;return e instanceof l.Tb?t=this.getTypeVectorConstr(e.vectorConstr):e instanceof l.Ub?t=this.getTypeImageConstr(e.imageConstr):e instanceof l.Vb?t=this.getTypeSubimageConstr(e.subimageConstr):e instanceof l.Wb&&(t=this.getTypePictureConstr(e.pictureConstr)),t}},{key:"getTypeVectorConstr",value:function(e){var t=this,n=void 0;if(e instanceof l.Xb){var i=this.getTypeClause(e.clause);if(!i)throw new h(e.clause.pos,"Unable to create void vector");this.expectType(e.clause.pos,"nonvoid",i);var r=function(e){t.expectType(e.a.pos,".!number",t.getTypeClause(e.a)),t.expectType(e.b.pos,".!number",t.getTypeClause(e.b))};r(e.range.rangeEl),e.range.rangeFollow.forEach((function(e){return r(e.rangeEl)})),n="*"+this.resolveType(i)}else if(e instanceof l.Yb){this.expectType(e.clause.pos,".!number",this.getTypeClause(e.clause));var a=this.getTypeClause(e.b);this.expectType(e.b.pos,"nonvoid",a),e.vectorConstrFollow.forEach((function(e){return t.expectType(e.pos,a,t.getTypeClause(e.clause))})),n="*"+a}return n}},{key:"getTypeImageConstr",value:function(e){var t,n=this.getTypeClause(e.image);return this.expectType(e.image.pos,"image",n),t=n,this.expectType(e.by.pos,".!number",this.getTypeClause(e.by)),this.expectType(e.of.pos,".!number",this.getTypeClause(e.of)),t}},{key:"getTypeSubimageConstr",value:function(e){var t,n=this.getTypeClause(e.clause);return this.expectType(e.clause.pos,"image",n),t=n,e.subimageConstrMid&&(this.expectType(e.subimageConstrMid.to.pos,".!number",this.getTypeClause(e.subimageConstrMid.to)),this.expectType(e.subimageConstrMid.by.pos,".!number",this.getTypeClause(e.subimageConstrMid.by))),e.subimageConstrEnd&&(this.expectType(e.subimageConstrEnd.at1.pos,".!number",this.getTypeClause(e.subimageConstrEnd.at1)),this.expectType(e.subimageConstrEnd.at2.pos,".!number",this.getTypeClause(e.subimageConstrEnd.at2))),t}},{key:"getTypePictureConstr",value:function(e){var t=void 0;return e instanceof l.eb||e instanceof l.fb?(t="pic",this.expectType(e.clause.pos,"pic",this.getTypeClause(e.clause)),this.expectType(e.b.pos,".!number",this.getTypeClause(e.b)),this.expectType(e.c.pos,".!number",this.getTypeClause(e.c))):e instanceof l.gb||e instanceof l.hb?(t="pic",this.expectType(e.clause.pos,"pic",this.getTypeClause(e.clause)),this.expectType(e.b.pos,".!number",this.getTypeClause(e.b))):e instanceof l.ib?(t="pic",this.expectType(e.clause.pos,"pic",this.getTypeClause(e.clause)),this.expectType(e.b.pos,".!number",this.getTypeClause(e.b)),this.expectType(e.c.pos,".!number",this.getTypeClause(e.c)),this.expectType(e.d.pos,".!number",this.getTypeClause(e.d)),this.expectType(e.e.pos,".!number",this.getTypeClause(e.e))):e instanceof l.jb&&(t="pic",this.expectType(e.clause.pos,".!number",this.getTypeClause(e.clause)),this.expectType(e.b.pos,".!number",this.getTypeClause(e.b))),t}},{key:"getTypeLiteral",value:function(e){var t=void 0;return e instanceof l.N?t="pntr":e instanceof l.O?t="file":e instanceof l.P?t=".!number":e instanceof l.Q?t="bool":e instanceof l.R?t="string":e instanceof l.S&&(t="#pixel"),t}},{key:"getTypeStandardExp",value:function(e){return this.getTypeStandardName(e.standardName)}},{key:"getTypeStandardName",value:function(e){var t=void 0;return e instanceof l.Db?t="upb":e instanceof l.Eb?t="lwb":e instanceof l.Jb?t="eof":e instanceof l.Kb?t="read.a.line":e instanceof l.Lb?t="read":e instanceof l.Mb?t="readi":e instanceof l.Nb?t="readr":e instanceof l.Ob?t="readb":e instanceof l.Pb?t="peek":e instanceof l.Qb?t="reads":e instanceof l.Fb?t="read.name":e instanceof l.Gb?t="read.byte":e instanceof l.Hb?t="read.16":e instanceof l.Ib&&(t="read.32"),t}},{key:"getTypeStandardId",value:function(e){var t="";return e instanceof l.sb?t="r.w":e instanceof l.tb?t="i.w":e instanceof l.vb?t="s.w":e instanceof l.wb?t="s.o":e instanceof l.xb?t="s.i":e instanceof l.yb?t="maxint":e instanceof l.zb?t="maxreal":e instanceof l.Ab?t="epsilon":e instanceof l.Bb?t="pi":e instanceof l.Cb?t="cursor":e instanceof l.ub&&(t="screen"),t}}]),e}()},29:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return App}));var _home_chance_projects_S_Algol_compiler_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(13),js_beautify__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(30),js_beautify__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(js_beautify__WEBPACK_IMPORTED_MODULE_1__),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(3),react__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__),_compiler_analyzer_analyzer__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(22),_compiler_codegen_codegen__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(32),_compiler_codegen_forwards__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(18),_compiler_codegen_prelude__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(33),_compiler_examples_escher_S__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(16),_compiler_parser_parser__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(1),_components_Editor__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(34),_components_Image__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(35),_components_Menu__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(37),genAST=function(e){try{return{ast:new _compiler_parser_parser__WEBPACK_IMPORTED_MODULE_8__.db(e).parse()}}catch(t){return{error:t.message,pos:t.pos}}},typeCheck=function(e){try{new _compiler_analyzer_analyzer__WEBPACK_IMPORTED_MODULE_3__.a(e).run()}catch(t){if(t instanceof _compiler_analyzer_analyzer__WEBPACK_IMPORTED_MODULE_3__.b)return{error:t.message,pos:t.pos};throw t}},genCode=function(e){var t=new _compiler_codegen_codegen__WEBPACK_IMPORTED_MODULE_4__.a(e).generate();return js_beautify__WEBPACK_IMPORTED_MODULE_1___default.a.js_beautify(t)},prettyError=function(e,t,n){var i=e.slice(0,n).split("\n").length;return"Error on line ".concat(i,": ").concat(t)},App=function App(){var _useState=Object(react__WEBPACK_IMPORTED_MODULE_2__.useState)(_compiler_examples_escher_S__WEBPACK_IMPORTED_MODULE_7__.a),_useState2=Object(_home_chance_projects_S_Algol_compiler_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(_useState,2),programCode=_useState2[0],setProgramCode=_useState2[1],_useState3=Object(react__WEBPACK_IMPORTED_MODULE_2__.useState)(""),_useState4=Object(_home_chance_projects_S_Algol_compiler_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(_useState3,2),errMsg=_useState4[0],setErrMsg=_useState4[1],_useState5=Object(react__WEBPACK_IMPORTED_MODULE_2__.useState)(""),_useState6=Object(_home_chance_projects_S_Algol_compiler_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(_useState5,2),output=_useState6[0],setOutput=_useState6[1],_useState7=Object(react__WEBPACK_IMPORTED_MODULE_2__.useState)([]),_useState8=Object(_home_chance_projects_S_Algol_compiler_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(_useState7,2),img=_useState8[0],setImg=_useState8[1];window.setImg=function(e){return setImg(e)};var compile=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:programCode;setErrMsg(""),setOutput(""),setImg([]);var n=genAST(_compiler_codegen_forwards__WEBPACK_IMPORTED_MODULE_5__.a+t);if("error"in n)setErrMsg(prettyError(programCode,n.error,n.pos-_compiler_codegen_forwards__WEBPACK_IMPORTED_MODULE_5__.a.length));else{var i=typeCheck(n.ast);if(!i){var r=(e?_compiler_codegen_prelude__WEBPACK_IMPORTED_MODULE_6__.a:"")+genCode(n.ast);return e||setOutput(r),r}setErrMsg(prettyError(programCode,i.error,i.pos-_compiler_codegen_forwards__WEBPACK_IMPORTED_MODULE_5__.a.length))}},compileAndRun=function compileAndRun(){var code=compile(!0);if(code){window.olog=[],eval(code);var output_log=window.olog,out=output_log.join("\n");setOutput(out)}},setAndCompile=function(e){setProgramCode(e),compile(!1,e)},loadFile=function(){var e=document.createElement("input");e.type="file",e.addEventListener("change",(function(){if(e.files){var t=new FileReader;t.onload=function(){return setAndCompile(t.result)},t.readAsText(e.files[0]),e.remove()}})),e.click()},saveFile=function(){var e=new Blob([programCode],{type:"text/s-algol"}),t=URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download="program.S",n.click(),n.remove(),URL.revokeObjectURL(t)};return Object(react__WEBPACK_IMPORTED_MODULE_2__.useEffect)((function(){compile(!1)}),[]),react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div",{className:"h-screen grid grid-cols-3"},react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div",{className:"col-span-3"},react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_components_Menu__WEBPACK_IMPORTED_MODULE_11__.a,{loadFile:loadFile,saveFile:saveFile,compile:compile,compileAndRun:compileAndRun,setAndCompile:setAndCompile})),react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div",{className:"col-span-2 border-r"},react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_components_Editor__WEBPACK_IMPORTED_MODULE_9__.a,{programCode:programCode,setProgramCode:setProgramCode})),react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div",{className:"overflow-y-scroll"},errMsg.length>0?react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("pre",{className:"m-2 p-2 bg-red-400 text-white font-semibold"},errMsg):react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div",{className:"m-2 p-2 bg-green-400 text-white font-semibold"},"Success"),img.length>0&&react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div",{className:"m-2"},react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_components_Image__WEBPACK_IMPORTED_MODULE_10__.a,{image:img})),output.length>0&&react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("pre",{className:"m-2 p-2 bg-gray-100"},output)))}},32:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var i=n(5),r=n(2),a=n(6),o=n(0),s=n(1),c=function e(t,n){Object(o.a)(this,e),this.name=t,this.fields=n},u=function e(t){Object(o.a)(this,e),this.name=t},l=function e(){var t=this;Object(o.a)(this,e),this.maps=[{reads:new u("reads"),readi:new u("readi"),upb:new u("upb"),lwb:new u("lwb"),dump:new u("dump")}],this.now=function(){return t.maps[t.maps.length-1]},this.pop=function(){return t.maps.pop()},this.push=function(){return t.maps.push({})},this.has=function(e){var n,i=Object(a.a)(t.maps);try{for(i.s();!(n=i.n()).done;){var r=n.value;if(Object.keys(r).includes(e))return r[e]}}catch(o){i.e(o)}finally{i.f()}}},h=function(){function e(t){Object(o.a)(this,e),this.program=t,this.typeStack=new l}return Object(r.a)(e,[{key:"generate",value:function(){return this.genProgram(this.program).replace(/^;*/,"").trim()}},{key:"getSoftID",value:function(e){return e.id.val.replace(/\./g,"_")}},{key:"flattenIdentifierList",value:function(e){var t=this;return[this.getSoftID(e.identifier)].concat(Object(i.a)(e.identifierListFollow.map((function(e){return t.getSoftID(e.identifier)}))))}},{key:"immediate",value:function(e){return"(()=>{return ".concat(e,"})()")}},{key:"genProgram",value:function(e){return this.genSequence(e.sequence)}},{key:"genSequence",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.typeStack.push();var r=[e.sequenceEl].concat(Object(i.a)(e.sequenceFollow.map((function(e){return e.sequenceEl})))).map((function(e){return t.genSequenceEl(e)}));n&&r.length>0&&(r[r.length-1]="return "+this.immediate(r[r.length-1]));var a=r.join(";");return this.typeStack.pop(),a}},{key:"genSequenceFollow",value:function(e){return this.genSequenceEl(e.sequenceEl)}},{key:"genSequenceEl",value:function(e){if(e instanceof s.qb)return this.genDeclaration(e.declaration);if(e instanceof s.rb)return this.genClause(e.clause);throw new Error("Unhandled branch")}},{key:"genDeclaration",value:function(e){if(e instanceof s.q)return this.genLetDecl(e.letDecl);if(e instanceof s.r)return this.genStructureDecl(e.structureDecl);if(e instanceof s.s)return this.genProcDecl(e.procDecl);if(e instanceof s.t)return this.genForward(e.forward);throw new Error("Unhandled branch")}},{key:"genLetDecl",value:function(e){var t=e.initOp instanceof s.M,n=this.genClause(e.clause);return"".concat(t?"const":"let"," ").concat(this.getSoftID(e.identifier)," = ").concat(this.immediate(n))}},{key:"genStructureDecl",value:function(e){var t=this,n=this.getSoftID(e.identifier),r=[];if(e.structureDeclFields&&e.structureDeclFields.fieldList){var a=e.structureDeclFields.fieldList;[a.fieldListEl].concat(Object(i.a)(a.fieldListFollow.map((function(e){return e.fieldListEl})))).map((function(e){return r.push.apply(r,Object(i.a)(t.flattenIdentifierList(e.identifierList)))}))}return this.typeStack.now()[n]=new c(n,r),""}},{key:"genProcDecl",value:function(e){var t=this,n=this.getSoftID(e.identifier),r=[];this.typeStack.now()[n]=new u(n),this.typeStack.push();var a=this.genClause(e.clause);if(this.typeStack.pop(),e.procDeclType&&e.procDeclType.parameterList){var o=e.procDeclType.parameterList;[o.parameter].concat(Object(i.a)(o.parameterListFollow.map((function(e){return e.parameter})))).forEach((function(e){e instanceof s.ab?r.push.apply(r,Object(i.a)(t.flattenIdentifierList(e.identifierList))):e instanceof s.bb?r.push(t.getSoftID(e.structureDecl.identifier)):e instanceof s.cb&&r.push.apply(r,Object(i.a)(t.flattenIdentifierList(e.identifierList)))}))}return"const ".concat(n," = (").concat(r.join(", "),") => ").concat(a,";")}},{key:"genForward",value:function(e){var t=this.getSoftID(e.identifier);return this.typeStack.now()[t]=new u(t),""}},{key:"genClause",value:function(e){var t=this;if(e instanceof s.d){var n=this.immediate(this.genClause(e.clause));if(e.ifClauseThen instanceof s.K){var r=this.genClause(e.ifClauseThen.clause);return r.startsWith("{")||(r="return ".concat(r)),"(()=>{if (".concat(n,") ").concat(r,"})()")}var a=this.genClause(e.ifClauseThen.then);a.startsWith("{")||(a="return ".concat(a));var o=this.genClause(e.ifClauseThen.elsex);return o.startsWith("{")||(o="return ".concat(o)),"(()=>{if (".concat(n,") ").concat(a," else ").concat(o,"})()")}if(e instanceof s.e){var c=this.genClause(e.whilex),u=this.genClause(e.repeat);return e.clauseDo?"":"do {".concat(u,"} while (").concat(c,")")}if(e instanceof s.f){var l=this.genClause(e.whilex),h=this.genClause(e.dox);return"while (".concat(l,") {").concat(h,"}")}if(e instanceof s.g){var d=this.getSoftID(e.identifier),p=this.immediate(this.genClause(e.from)),f=this.immediate(this.genClause(e.to)),x=this.genClause(e.dox),b="1";return e.clauseBy&&(b=this.immediate(this.genClause(e.clauseBy.clause))),"(()=>{for (let ".concat(d," = ").concat(p,"; ").concat(b," > 0 ? ").concat(d," <= ").concat(f," : ").concat(d," > ").concat(f,";  ").concat(d," += ").concat(b,") {(()=>{").concat(x,"})()}})()")}if(e instanceof s.h){var k=this.genClause(e.casex),y=this.genClause(e.defaultx),v=[e.caseList.caseListEl].concat(Object(i.a)(e.caseList.caseListFollow.map((function(e){return e.caseListEl})))).map((function(e){var n=[e.clauseList.clause].concat(Object(i.a)(e.clauseList.clauseListFollow.map((function(e){return e.clause})))).map((function(e){return"case ".concat(t.genClause(e),":")})),r=t.genClause(e.clause);return"".concat(n.join("\n")," return ").concat(t.immediate(r))})).join("\n");return"(()=>{switch (".concat(this.immediate(k),") {").concat(v,"\ndefault: return ").concat(this.immediate(y),"}})()")}if(e instanceof s.i)return"";if(e instanceof s.j)return this.genWriteClause(e.writeClause);if(e instanceof s.k)throw new Error("TODO implement raster expression");if(e instanceof s.l){var w=this.genExpression(e.expression);if(e.clauseExprFollow){var _=this.genClause(e.clauseExprFollow.clause);return"".concat(w," = ").concat(_,";")}return w}throw console.log(e),new Error("Unhandled branch")}},{key:"genWriteClause",value:function(e){if(e instanceof s.Zb)return"write(".concat(this.genWriteList(e.writeList),");");throw e instanceof s.ac||e instanceof s.bc||e instanceof s.cc||s.dc,new Error("Unhandled branch")}},{key:"genWriteList",value:function(e){var t=this;return[e.writeListEl].concat(Object(i.a)(e.writeListFollow.map((function(e){return e.writeListEl})))).map((function(e){return t.genWriteListEl(e)})).join(",")}},{key:"genWriteListEl",value:function(e){if(void 0!==e.writeListElFollow)throw new Error("TODO unable to handle depth writing");return this.genClause(e.clause)}},{key:"genExpression",value:function(e){var t=this;return this.genExp1(e.exp1)+e.expressionFollow.map((function(e){return"|| ".concat(t.genExp1(e.exp1))})).join(" ")}},{key:"genExp1",value:function(e){var t=this;return this.genExp2(e.exp2)+e.exp1Follow.map((function(e){return"&& ".concat(t.genExp2(e.exp2))})).join(" ")}},{key:"genExp2",value:function(e){var t=this,n=this.genExp3(e.exp3)+e.exp2Op.map((function(e){return"".concat(t.genRelOp(e.relOp)," ").concat(t.genExp3(e.exp3))})).join(" ");return e instanceof s.w?"!(".concat(n,")"):n}},{key:"genExp3",value:function(e){var t=this;return this.genExp4(e.exp4)+e.exp3Op.map((function(e){return"".concat(t.genAddOp(e.addOp)," ").concat(t.genExp4(e.exp4))})).join(" ")}},{key:"genExp4",value:function(e){var t=this;return this.genExp5(e.exp5)+e.exp4Op.map((function(e){return"".concat(t.genMultOp(e.multOp)," ").concat(t.genExp5(e.exp5))})).join(" ")}},{key:"genExp5",value:function(e){var t=this,n=this.genExp6(e.exp6),i=this.typeStack.has(n),r=n,a=e.exp5Follow.map((function(e){return t.genExpressionArg(e.expressionArg)}));if(i instanceof c){for(var o=[],l=0;l<i.fields.length;l++)o.push('"'.concat(i.fields[l],'": ').concat(a[0][l]));return"{".concat(o.join(","),"}")}if(i instanceof u)r+="(".concat(a.join(),")");else if("struct"===e.exp6.v_type)r="".concat(r,'["').concat(a[0],'"]');else if(a.length>0)return"".concat(r,"[").concat(a[0].join(),"]");return e instanceof s.y&&(r=this.genAddOp(e.addOp)+"(".concat(r,")")),r}},{key:"genExpressionArg",value:function(e){var t=this;if(e.expressionArgFollow instanceof s.G)return[];var n=[e.clause];return e.expressionArgFollow instanceof s.H&&n.push.apply(n,[e.expressionArgFollow.clauseList.clause].concat(Object(i.a)(e.expressionArgFollow.clauseList.clauseListFollow.map((function(e){return e.clause}))))),n.map((function(e){return t.genClause(e)}))}},{key:"genExp6",value:function(e){if(e instanceof s.z)return"(".concat(this.genClause(e.clause),")");if(e instanceof s.A||e instanceof s.B)return"{".concat(e.sequence?this.genSequence(e.sequence,!0):"","}");if(e instanceof s.C)return this.genStandardExp(e.standardExp);if(e instanceof s.D)return this.genLiteral(e.literal);if(e instanceof s.E)return this.genValueConstructor(e.valueConstructor);if(e instanceof s.F)return this.genIdentifier(e.identifier);throw new Error("Unhandled branch")}},{key:"genValueConstructor",value:function(e){if(e instanceof s.Tb)return this.genVectorConstr(e.vectorConstr);if(e instanceof s.Ub);else if(e instanceof s.Vb);else if(e instanceof s.Wb)return this.genPictureConstr(e.pictureConstr);throw new Error("Unhandled branch")}},{key:"genVectorConstr",value:function(e){if(e instanceof s.Xb){var t=this.genClause(e.range.rangeEl.a),n=this.genClause(e.range.rangeEl.b),i=this.genClause(e.clause);return"(()=>{const a = {};for(let i = ".concat(t,"; i <= ").concat(n,"; i++) a[i] = ").concat(i,";return a;})()")}throw s.Yb,new Error("Unhandled branch")}},{key:"genPictureConstr",value:function(e){if(e instanceof s.eb){var t=this.genClause(e.clause),n=this.genClause(e.b),i=this.genClause(e.c);return"_d_sh(".concat(t,", ").concat(n,", ").concat(i,")")}if(e instanceof s.fb){var r=this.genClause(e.clause),a=this.genClause(e.b),o=this.genClause(e.c);return"_d_sc(".concat(r,", ").concat(a,", ").concat(o,")")}if(e instanceof s.gb){var c=this.genClause(e.clause),u=this.genClause(e.b);return"_d_ro(".concat(c,", ").concat(u,")")}throw e instanceof s.hb||e instanceof s.ib||s.jb,new Error("Unhandled branch")}},{key:"genLiteral",value:function(e){if(e instanceof s.N)return"[]";if(e instanceof s.O)return"undefined";if(e instanceof s.P)return e.integerLiteral.number.val.toString();if(e instanceof s.Q)return e.booleanLiteral instanceof s.c?"true":"false";if(e instanceof s.R)return'"'.concat(e.string.val,'"');if(e instanceof s.S)throw new Error("Pixel literals not implemented");throw new Error("Unhandled branch")}},{key:"genAddOp",value:function(e){if(e instanceof s.a)return"+";if(e instanceof s.b)return"-";throw new Error("Unhandled branch")}},{key:"genMultOp",value:function(e){if(e instanceof s.T)return"+";if(e instanceof s.U)return"";if(e instanceof s.V)return"%";if(e instanceof s.W)return"*";if(e instanceof s.X)return"/";if(e instanceof s.Y)throw new Error("Pixel joining not supported");if(e instanceof s.Z)throw new Error("Pixel inclusion not supported");throw new Error("Unhandled branch")}},{key:"genRelOp",value:function(e){if(e instanceof s.nb)return this.genEqOp(e.eqOp);if(e instanceof s.ob)return this.genComparOp(e.comparOp);if(e instanceof s.pb)return this.genTypeOp(e.typeOp);throw new Error("Unhandled branch")}},{key:"genEqOp",value:function(e){if(e instanceof s.u)return"==";if(e instanceof s.v)return"!=";throw new Error("Unhandled branch")}},{key:"genComparOp",value:function(e){if(e instanceof s.m)return"<=";if(e instanceof s.n)return"<";if(e instanceof s.o)return">=";if(e instanceof s.p)return">";throw new Error("Unhandled branch")}},{key:"genTypeOp",value:function(e){if(e instanceof s.Rb)return"instanceof";if(e instanceof s.Sb)return"";throw new Error("Unhandled branch")}},{key:"genIdentifier",value:function(e){if(e instanceof s.I)return this.getSoftID(e);if(e instanceof s.J)return this.genStandardId(e.standardId);throw new Error("Unhandled branch")}},{key:"genStandardExp",value:function(e){return this.genStandardName(e.standardName)}},{key:"genStandardName",value:function(e){if(e instanceof s.Db)return"upb";if(e instanceof s.Eb)return"lwb";if(e instanceof s.Jb)return"eof";if(e instanceof s.Kb)return"read.a.line";if(e instanceof s.Lb)return"read";if(e instanceof s.Mb)return"readi";if(e instanceof s.Nb)return"readr";if(e instanceof s.Ob)return"readb";if(e instanceof s.Pb)return"peak";if(e instanceof s.Qb)return"reads";if(e instanceof s.Fb)return"read.name";if(e instanceof s.Gb)return"read.byte";if(e instanceof s.Hb)return"read.16";if(e instanceof s.Ib)return"read.32";throw new Error("Unhandled branch")}},{key:"genStandardId",value:function(e){if(e instanceof s.sb)return"r.w";if(e instanceof s.tb)return"i.w";if(e instanceof s.vb)return"s.w";if(e instanceof s.wb)return"s.o";if(e instanceof s.xb)return"s.i";if(e instanceof s.yb)return"maxint";if(e instanceof s.zb)return"maxreal";if(e instanceof s.Ab)return"epsilon";if(e instanceof s.Bb)return"pi";if(e instanceof s.Cb)return"cursor";if(e instanceof s.ub)return"screen";throw new Error("Unhandled branch")}}]),e}()},33:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i='\nconst write = (...args) => window.olog.push(args.join(""));\nconst reads = () => prompt("Program requests string input");\nconst readi = () => parseInt(prompt("Program requests integer input"));\nconst upb = of => Math.max(...Object.keys(of).map(k=>parseInt(k)));\nconst lwb = of => Math.min(...Object.keys(of).map(k=>parseInt(k)));\n\nconst reads_prompt = p => prompt(p);\nconst readi_prompt = p => parseInt(prompt(p));\nconst dump = o => console.log(o);\n\n\n// GRAPHICS\nwindow._adc_wm = 20;\nwindow._adc_hm = 15;\nconst draw_scale = (x, y) => {\n  window._adc_wm = x;\n  window._adc_hm = y;\n}\n\nconst draw_line = (image, x1, y1, x2, y2) => image.push([[x1, y1], [x2, y2]]);\nconst draw_image = image => {\n  image.forEach(line => {\n    line[0][0] *= window._adc_wm;\n    line[1][0] *= window._adc_wm;\n    line[0][1] *= window._adc_hm;\n    line[1][1] *= window._adc_hm;\n  });\n  window.setImg(image);\n}\n\nconst d_nl = (pic, x, y) => {\n  if (pic.length === 0) pic.push([[x, y], [x, y]]);\n  else {\n    const last = pic[pic.length - 1];\n    pic.push([[last[1][0], last[1][1]], [x, y]]);\n  }\n};\nconst d_ad = (from, to) => to.push(...from.map(line=>[\n  [line[0][0], line[0][1]],\n  [line[1][0], line[1][1]]\n]));\nconst _rotate_point = (angle_r, x, y) => {\n  const c = Math.cos(angle_r);\n  const s = Math.sin(angle_r);\n  return [c * x + s * y, c * y - s * x];\n}\nconst _d_ro = (pic, angle) => {\n  const angle_r = (Math.PI / 180) * angle;\n  return pic.map(line => [\n    _rotate_point(angle_r, line[0][0], line[0][1]),\n    _rotate_point(angle_r, line[1][0], line[1][1])\n  ]);\n};\nconst _d_sh = (pic, x, y) => pic.map(line => [\n  [line[0][0] + x, line[0][1] + y],\n  [line[1][0] + x, line[1][1] + y]\n]);\nconst _d_sc = (pic, x, y) => pic.map(line => [\n  [line[0][0] * x, line[0][1] * y],\n  [line[1][0] * x, line[1][1] * y]\n]);\n'},34:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n(17),r=n(3),a=n.n(r);n(75);i.monaco.init().then((function(e){e.languages.register({id:"salgol"}),e.languages.setMonarchTokensProvider("salgol",{keywords:["abort","and","at","begin","by","c","case","cursor","default","do","else","end","eof","epsilon","false","for","forward","from","i.w","if","in","let","limit","lwb","maxint","maxreal","nil","nullfile","of","off","on","onto","or","out.16","out.32","out.byte","output","peek","pi","procedure","r.w","read","read.16","read.32","read.a.line","read.byte","read.name","readb","readi","readr","reads","repeat","rotate","s.i","s.o","s.w","scale","screen","shift","structure","text","then","to","true","upb","vector","while","write"],typeKeywords:["cint","creal","cbool","cstring","cpixel","cpic","cpntr","cfile","c#pixel","c#cpixel","colour","#cpixel","#pixel","bool","file","image","pic","pixel","pntr","real","int","string"],operators:["&","*","+","++",",","-","->","/",":","::",":=",";","=","~=","<","<=",">",">=","@","^","~","copy","nand","nor","not","rand","ror","xnor","xor","div","rem","is","isnt"],symbols:/[=><!~?:&|+\-*/^%]+/,escapes:/\\(?:[abfnrtv\\"']|x[0-9A-Fa-f]{1,4}|u[0-9A-Fa-f]{4}|U[0-9A-Fa-f]{8})/,tokenizer:{root:[[/[\w.]+/,{cases:{"@typeKeywords":"keyword","@keywords":"keyword","@default":"identifier"}}],{include:"@whitespace"},[/[{}()[]]/,"@brackets"],[/[<>](?!@symbols)/,"@brackets"],[/@symbols/,{cases:{"@operators":"operator","@default":""}}],[/@\s*[\w.]+/,{token:"annotation"}],[/\d*\.\d+([eE][-+]?\d+)?/,"number.float"],[/0[xX][0-9a-fA-F]+/,"number.hex"],[/\d+/,"number"],[/[;,.]/,"delimiter"],[/"([^"\\]|\\.)*$/,"string.invalid"],[/"/,{token:"string.quote",bracket:"@open",next:"@string"}],[/'[^\\']'/,"string"],[/(')(@escapes)(')/,["string","string.escape","string"]],[/'/,"string.invalid"]],string:[[/[^\\"]+/,"string"],[/@escapes/,"string.escape"],[/\\./,"string.escape.invalid"],[/"/,{token:"string.quote",bracket:"@close",next:"@pop"}]],whitespace:[[/[ \t\r\n]+/,"white"],[/!.*$/,"comment"]]}})}));var o=function(e){return a.a.createElement(i.ControlledEditor,{value:e.programCode,onChange:function(t,n){return e.setProgramCode(n)},language:"salgol"})}},35:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n(6),r=n(3),a=n.n(r),o=function(e){var t=Object(r.useRef)(null);return Object(r.useEffect)((function(){var n=t.current,r=n.getContext("2d");r.clearRect(0,0,n.width,n.height),r.beginPath();var a,o=Object(i.a)(e.image);try{for(o.s();!(a=o.n()).done;){var s=a.value;r.moveTo(s[0][0],s[0][1]),r.lineTo(s[1][0],s[1][1])}}catch(c){o.e(c)}finally{o.f()}r.stroke()}),[e.image]),a.a.createElement("canvas",{width:"600",height:"400",ref:t})}},37:function(e,t,n){"use strict";var i=n(3),r=n.n(i),a=n(16);n.d(t,"a",(function(){return s}));var o=function(e){return r.a.createElement("div",{onClick:e.clicked,className:"px-2 m-1 py-1 border rounded cursor-pointer hover:bg-gray-100"},e.text)},s=function(e){var t=[["tests.S",'! S-algol Javascript Compiler (2020)\n\n!! CURRENTLY SUPPORTED FEATURES\n!! ============================\n!! Function definition (+nested), calling, with/without parameters\n!! Variable assignment, reassignment, lookup\n!! Control flow: IF, WHILE, FOR, CASE\n!! Structure creation, modification, lookup\n!! Type 1 vector creation with upb/lwb, assignment, lookup\n!! Vector graphics\n!! Basic IO\n\n!! STDLIB\n!! ======\n!! write(...args)                            Write to REPL output\n!! reads(->string)                           Read string from user\n!! readi(->int)                              Read int from user\n!! upb(->int)                                Get upper bound of vector\n!! lwb(->int)                                Get lower bound of vector\n\n!! reads.prompt(string->string)              Prompt user for string input\n!! readi.prompt(string->int)                 Prompt user for int input\n!! draw.scale(int, int)                      Set the canvas scale\n!! draw.line(#pixel, int, int, int, int)     Draw a line on a picture\n!! draw.image(#pixel)                        Render the picture\n!! d.nl(#pixel, int, int)                    Add a point to an image\n!! d.ad(#pixel, #pixel)                      Merge two images\n!! dump(nonvoid)                             Dump object to browser console\n\n\n\n! Test while control flow\nprocedure while.test(-> int)\nbegin\n     let x := 13\n     while x < 20 do x := x + 1\n     x\nend\nwrite "test while, expect 20 -> ", while.test\n\n\n\n! Test vectors\nprocedure gen.vector(-> *int)\nbegin\n     let v := vector 1 :: 10 of 1\n     v(5) := 5\n     v\nend\nprocedure vector.access.test(-> int)\nbegin\n     let v := gen.vector\n     v(1) + v(5)\nend\nwrite "test vector access, expect 6 -> ", vector.access.test\n\n\n\n! Test structures\nstructure some.struct(bool works; int count)\nprocedure struct.int.test(-> int)\nbegin\n     let s := some.struct(true, 10)\n     s(count)\nend\nprocedure struct.bool.test(-> bool)\nbegin\n     let s := some.struct(true, 10)\n     s(works)\nend\nprocedure struct.assign.test(-> int)\nbegin\n     let s := some.struct(true, 10)\n     s(count) := 20\n     s(count)\nend\nwrite "test struct int, expect 10 -> ", struct.int.test\nwrite "test struct bool, expect true -> ", struct.bool.test\nwrite "test struct assign, expect 20 -> ", struct.assign.test\n\n\n\n! Test if control flow\nprocedure if.test(int x -> int)\nbegin\n     if x < 20 then x else x + 1\nend\nwrite "test if, expect 10 -> ", if.test(10)\nwrite "test if, expect 21 -> ", if.test(20)\n\n\n\n! Test for control flow\nprocedure for.test(-> int)\nbegin\n     let x := 0\n     for y = 0 to 10 by 2 do x := x + 1\n     x\nend\nwrite "test for, expect 6 -> ", for.test\n\n\n\n! Test case control flow\nprocedure case.test(string x -> int)\n     case x of \n     "1": 3\n     "2": 2\n     "3": 1\n     default: 4\nwrite "test case, expect 3 -> ", case.test("1")\nwrite "test case, expect 2 -> ", case.test("2")\nwrite "test case, expect 1 -> ", case.test("3")\nwrite "test case, expect 4 -> ", case.test("10")\n\n\n\n! Test function calls and nesting control flow\nprocedure returns.3(->int)\n     3\nprocedure returns.inner.call(->int)\nbegin\n     procedure ret(->int); returns.3\n     ret\nend\nwrite "test calls, expect 3 -> ", returns.inner.call'],["fast.S",'! Fast Murray Polygon.  4/11/87.  Adapted 2020\n! Click run at the top, and use values 2, 2, 3, 5, 5, 5\n\nprocedure change.parities(*bool p; int start)\nbegin\n    for i = start to 1 by -2 do p(i) := ~p(i)\nend\n\nprocedure increment(*int d, r; int i -> int)\nbegin\n    if d(i) < r(i) - 1 then {d(i) := d(i) + 1; i}\n    else {d(i) := 0; increment(d, r, i + 1)}\nend\n\nprocedure get.rads(*int digits, radices; int x.rad, y.rad)\nbegin\n    for i = 1 to 2 * x.rad by 2 do radices(i) := readi.prompt("X radices")\n    for i = 2 to 2 * y.rad by 2 do radices(i) := readi.prompt("Y radices")\nend \n\nprocedure number.pts(*int r; int start, inc -> int)\nbegin\n    let res := 1\n    for j = start to upb(r) - 1 by inc do res := res * r(j)\n    res \nend \n\nlet x.rad = readi.prompt("Number of X radices")\nlet y.rad = readi.prompt("Number of Y radices")\n\nlet max.rad = if x.rad > y.rad then x.rad else y.rad\nlet complexity = 2 * max.rad\nlet digits = vector 1 :: complexity + 1 of 0\nlet radices = vector 1 :: complexity + 1 of 1\nlet parities = vector 1 :: complexity + 1 of true\n\nget.rads(digits, radices, x.rad, y.rad)\nlet no.pts := number.pts(radices, 1, 1)\nlet nx := number.pts(radices, 1, 2)\nlet ny := number.pts(radices, 2, 2)\n\nlet width = if nx > ny then nx else ny\nlet x1 := 0\nlet y1 := 0\nlet x2 := 0\nlet y2 := 0\nlet next.seg := nil\n\nfor itr = 1 to no.pts - 1 do\nbegin\n    let i = increment(digits, radices, 1)\n    change.parities(parities, i)\n    let inc = if parities(i + 1) then 1 else -1\n    if i rem 2 = 1 then x2 := x2 + inc else y2 := y2 + inc\n    draw.line(next.seg, x1, y1, x2, y2)\n    if i rem 2 = 1 then x1 := x2 else y1 := y2\nend\ndraw.image(next.seg)\n'],["escher.S",a.a]];return r.a.createElement("div",{className:"border-b px-5 flex"},r.a.createElement("div",{className:"p-2 font-semibold"},"S-algol Compiler"),r.a.createElement("div",{className:"pl-5 flex"},t.map((function(t){return r.a.createElement(o,{key:t[0],clicked:function(){return e.setAndCompile(t[1])},text:"Load ".concat(t[0])})})),r.a.createElement(o,{clicked:function(){return e.loadFile()},text:"Load file"}),r.a.createElement(o,{clicked:function(){return e.saveFile()},text:"Save file"}),r.a.createElement(o,{clicked:function(){return e.compile(!1)},text:"Compile"}),r.a.createElement(o,{clicked:function(){return e.compileAndRun()},text:"Run"})))}},39:function(e,t,n){e.exports=n(40)},40:function(e,t,n){"use strict";n.r(t);var i=n(3),r=n.n(i),a=n(28),o=n.n(a),s=n(29);o.a.render(r.a.createElement(s.a,null),document.getElementById("root"))},75:function(e,t,n){}},[[39,1,2]]]);
//# sourceMappingURL=main.6bf31085.chunk.js.map